<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³½åšåšæ¯ (Cyber Bua Buei) - è¬äº‹å•ç¥æ˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FEF2F2; /* red-50 */
        }
        .buei {
            width: 100px;
            height: 100px;
            background: #D72638; /* Temple Red */
            border-radius: 50%;
            position: relative;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: inline-block;
            margin: 0 10px;
        }
        /* Moon block shape - half circle essentially */
        .buei::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: #E8B99F; /* Wood/Inner color */
            border-top-left-radius: 100px;
            border-top-right-radius: 100px;
            display: none; /* Hidden by default (Round side up) */
        }
        
        /* Flat side up (Yang/Up) */
        .buei.yang {
            background: #E8B99F;
            transform: rotateX(180deg);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
        }
        
        /* Round side up (Yin/Down) - Default style but we make it explicit */
        .buei.yin {
            background: #D72638;
        }

        /* Shape refinement for the classic crescent look */
        .buei-shape {
            width: 80px;
            height: 140px;
            background-color: #D72638;
            border-radius: 50%;
            position: relative;
            clip-path: ellipse(45% 45% at 50% 50%);
            /* Complex shape is hard in pure CSS, let's stick to simple half-circles/kidney shapes if possible or images. 
               Let's try a simpler kidney bean shape using border-radius. */
            border-radius: 100% 0 0 100% / 50% 0 0 50%; /* Half circle vertical */
            height: 100px;
            width: 50px;
        }

        /* Let's try a simpler visual: Two red half-moons */
        .moon-block {
            width: 80px;
            height: 120px;
            background-color: #D93025;
            border-radius: 40px 0 0 40px; /* Left half */
            display: inline-block;
            transition: transform 0.6s ease-out;
            border: 2px solid #991B1B;
            position: relative;
        }
        
        .moon-block.right {
            border-radius: 0 40px 40px 0; /* Right half */
        }

        /* Flat side (Yang) state simulation */
        /* Since we are doing 2D, we flip them to show "Flat" vs "Round" */
        /* Let's define: 
           Round Side Up (Yin/Down): Red, convex. 
           Flat Side Up (Yang/Up): Wood color, flat.
        */

        .block-container {
            perspective: 800px;
            display: inline-block;
            margin: 0 20px;
        }

        .block {
            width: 100px;
            height: 100px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s;
        }

        .face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .face-front {
            background: #D93025; /* Red Round Side */
            color: white;
            border: 4px solid #991B1B;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            content: "é™°";
        }

        .face-back {
            background: #F3C695; /* Wood Flat Side */
            color: #8B4513;
            transform: rotateY(180deg);
            border: 4px solid #8B4513;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            content: "é™½";
        }
        
        /* Animation classes */
        .tossing {
            animation: toss 0.5s infinite alternate;
        }
        
        @keyframes toss {
            0% { transform: translateY(0) rotateX(0); }
            100% { transform: translateY(-50px) rotateX(180deg); }
        }

    </style>
</head>
<body class="bg-amber-50 min-h-screen flex flex-col items-center">

    <!-- Nav -->
    <nav class="w-full bg-red-800 text-white p-4 shadow-lg mb-8">
        <div class="container mx-auto flex justify-between items-center">
            <a href="../../index.html" class="flex items-center gap-2 hover:text-amber-200 transition">
                <span>ğŸ </span> è¿”å›å„€è¡¨æ¿
            </a>
            <h1 class="text-xl font-bold tracking-widest">ğŸ™ è³½åšåšæ¯ Cyber Bua Buei</h1>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto max-w-lg px-4 flex-1 flex flex-col items-center text-center">
        
        <div class="bg-white p-8 rounded-2xl shadow-xl w-full border-4 border-red-800 relative overflow-hidden">
            <!-- Decorative corner patterns -->
            <div class="absolute top-0 left-0 w-16 h-16 border-t-4 border-l-4 border-amber-500 rounded-tl-lg"></div>
            <div class="absolute top-0 right-0 w-16 h-16 border-t-4 border-r-4 border-amber-500 rounded-tr-lg"></div>
            <div class="absolute bottom-0 left-0 w-16 h-16 border-b-4 border-l-4 border-amber-500 rounded-bl-lg"></div>
            <div class="absolute bottom-0 right-0 w-16 h-16 border-b-4 border-r-4 border-amber-500 rounded-br-lg"></div>

            <h2 class="text-2xl font-bold text-red-900 mb-6">èª å¿ƒèª æ„ï¼Œæœ‰æ±‚å¿…æ‡‰</h2>
            
            <div class="mb-6">
                <input type="text" id="question" placeholder="åœ¨æ­¤è¼¸å…¥ä½ æƒ³å•ç¥æ˜çš„äº‹..." 
                    class="w-full p-4 border-2 border-red-200 rounded-lg focus:outline-none focus:border-red-600 text-center text-lg placeholder-red-300">
            </div>

            <!-- The Blocks -->
            <div class="flex justify-center items-center h-40 mb-8 perspective-container">
                <div class="block-container">
                    <div id="block1" class="block">
                        <div class="face face-front flex flex-col justify-center"><div class="text-3xl">ğŸŒ°</div><div class="text-xs mt-1">å‡¸</div></div>
                        <div class="face face-back flex flex-col justify-center"><div class="text-3xl">âœ¨</div><div class="text-xs mt-1">å¹³</div></div>
                    </div>
                </div>
                <div class="block-container">
                    <div id="block2" class="block">
                        <div class="face face-front flex flex-col justify-center"><div class="text-3xl">ğŸŒ°</div><div class="text-xs mt-1">å‡¸</div></div>
                        <div class="face face-back flex flex-col justify-center"><div class="text-3xl">âœ¨</div><div class="text-xs mt-1">å¹³</div></div>
                    </div>
                </div>
            </div>

            <button id="tossBtn" onclick="tossBlocks()" 
                class="bg-red-600 hover:bg-red-700 active:scale-95 text-white text-xl font-bold py-4 px-12 rounded-full shadow-lg transition transform hover:-translate-y-1 mb-6 w-full border-b-4 border-red-900">
                ğŸ¤² æ“²ç­Š (Toss)
            </button>

            <!-- Result Display -->
            <div id="resultArea" class="hidden opacity-0 transition-all duration-500">
                <div id="resultTitle" class="text-4xl font-bold text-red-600 mb-2">è–ç­Š</div>
                <div id="resultDesc" class="text-gray-600 text-lg">ç¥æ˜åŒæ„äº†ï¼Œå¤§å‰å¤§åˆ©ï¼</div>
            </div>
        </div>

        <!-- History/Log -->
        <div class="mt-8 w-full max-w-md">
            <h3 class="text-red-800 font-bold mb-2 text-left">ğŸ“œ æ“²ç­Šç´€éŒ„</h3>
            <ul id="historyList" class="bg-white/50 rounded-lg p-4 space-y-2 text-sm text-gray-700 max-h-40 overflow-y-auto shadow-inner text-left">
                <li class="text-gray-400 text-center italic">å°šç„¡ç´€éŒ„...</li>
            </ul>
        </div>

    </main>

    <footer class="mt-12 mb-6 text-red-900/60 text-sm">
        Created by AI Agent on <span id="date"></span>
    </footer>

    <script>
        document.getElementById('date').innerText = new Date().toISOString().split('T')[0];

        const questions = [
            "å¯ä»¥å–æ‰‹æ–é£²å—ï¼Ÿ",
            "é€™é€±æœƒä¸‹é›¨å—ï¼Ÿ",
            "æ‡‰è©²è¦è²·é€™å¼µè‚¡ç¥¨å—ï¼Ÿ",
            "è¦ä¸è¦å‘Šç™½ï¼Ÿ",
            "æ™šé¤åƒæ»·è‚‰é£¯å—ï¼Ÿ"
        ];
        document.getElementById('question').placeholder = "ä¾‹ï¼š" + questions[Math.floor(Math.random() * questions.length)];

        let isTossing = false;

        function tossBlocks() {
            if (isTossing) return;
            isTossing = true;
            
            const btn = document.getElementById('tossBtn');
            const b1 = document.getElementById('block1');
            const b2 = document.getElementById('block2');
            const resultArea = document.getElementById('resultArea');
            const questionInput = document.getElementById('question');

            // Reset UI
            resultArea.classList.add('hidden', 'opacity-0');
            btn.disabled = true;
            btn.innerText = "ğŸ™ ç¥ˆæ±‚ä¸­...";
            
            // Random spin duration
            let spins = 0;
            const maxSpins = 20;
            const interval = setInterval(() => {
                const r1 = Math.random() > 0.5 ? 0 : 180;
                const r2 = Math.random() > 0.5 ? 0 : 180;
                const rot1 = Math.floor(Math.random() * 360);
                const rot2 = Math.floor(Math.random() * 360);
                
                b1.style.transform = `rotateY(${r1 + spins * 360}deg) rotateZ(${rot1}deg)`;
                b2.style.transform = `rotateY(${r2 - spins * 360}deg) rotateZ(${rot2}deg)`;
                spins++;
                
                if (spins > maxSpins) {
                    clearInterval(interval);
                    finalizeResult();
                }
            }, 50);
        }

        function finalizeResult() {
            const b1 = document.getElementById('block1');
            const b2 = document.getElementById('block2');
            
            // 0 = Round/Yin (Red), 1 = Flat/Yang (Wood)
            const outcome1 = Math.random() > 0.5 ? 0 : 1; 
            const outcome2 = Math.random() > 0.5 ? 0 : 1;

            // Apply final rotation
            // We want them to land somewhat neatly but with random rotation
            const landRot1 = Math.floor(Math.random() * 60) - 30; // -30 to 30 deg
            const landRot2 = Math.floor(Math.random() * 60) - 30;

            // face-back is rotateY(180), face-front is 0
            // if outcome is 1 (Flat/Yang), we want back visible -> rotateY(180)
            // if outcome is 0 (Round/Yin), we want front visible -> rotateY(0) or 360
            
            const finalY1 = outcome1 === 1 ? 180 : 0;
            const finalY2 = outcome2 === 1 ? 180 : 0;

            // Add some full spins to make it smooth from the chaotic spin
            b1.style.transform = `rotateY(${finalY1 + 720}deg) rotateZ(${landRot1}deg)`;
            b2.style.transform = `rotateY(${finalY2 + 720}deg) rotateZ(${landRot2}deg)`;

            setTimeout(() => {
                showResult(outcome1, outcome2);
            }, 600);
        }

        function showResult(o1, o2) {
            const resultArea = document.getElementById('resultArea');
            const resultTitle = document.getElementById('resultTitle');
            const resultDesc = document.getElementById('resultDesc');
            const btn = document.getElementById('tossBtn');
            const questionInput = document.getElementById('question');
            
            let title = "";
            let desc = "";
            let colorClass = "";
            let icon = "";

            const sum = o1 + o2; // 0=YY(No), 1=OneYOneN(Holy), 2=NN(Laugh)
            // Wait, logic check:
            // o=0 (Round/Yin/Red/Convex)
            // o=1 (Flat/Yang/Wood/Flat)
            
            // Holy Poe (è–ç­Š): One Flat (1), One Round (0) -> sum = 1
            // Laughing Poe (ç¬‘ç­Š): Two Flat (1, 1) -> sum = 2
            // No Poe (é™°ç­Š/ç„¡ç­Š): Two Round (0, 0) -> sum = 0

            if (sum === 1) {
                title = "è–ç­Š (ShÃ¨ng JiÇo)";
                desc = "ç¥æ˜åŒæ„ï¼æ‰€æ±‚ä¹‹äº‹å¤§å‰ã€‚";
                colorClass = "text-red-600";
                icon = "â­•";
            } else if (sum === 2) {
                title = "ç¬‘ç­Š (XiÃ o JiÇo)";
                desc = "ç¥æ˜ç¬‘è€Œä¸èªï¼Œå¯èƒ½å•é¡Œä¸æ¸…æ¥šæˆ–æ©Ÿç·£æœªåˆ°ã€‚";
                colorClass = "text-amber-600";
                icon = "ğŸ˜";
            } else {
                title = "é™°ç­Š (YÄ«n JiÇo)";
                desc = "ç¥æ˜ä¸åŒæ„ï¼Œæˆ–æ™‚æ©Ÿä¸å°ï¼Œè«‹ä¸‰æ€ã€‚";
                colorClass = "text-gray-600";
                icon = "âŒ";
            }

            resultTitle.className = "text-4xl font-bold mb-2 " + colorClass;
            resultTitle.innerText = title;
            resultDesc.innerText = desc;
            
            resultArea.classList.remove('hidden');
            // Trigger reflow for transition
            void resultArea.offsetWidth;
            resultArea.classList.remove('opacity-0');

            btn.disabled = false;
            btn.innerText = "ğŸ¤² å†å•ä¸€æ¬¡";
            isTossing = false;

            // Add to history
            const historyList = document.getElementById('historyList');
            if (historyList.children[0]?.innerText === "å°šç„¡ç´€éŒ„...") {
                historyList.innerHTML = "";
            }
            
            const qText = questionInput.value.trim() || "èª å¿ƒç¥ˆæ±‚";
            const li = document.createElement('li');
            li.innerHTML = `<span class="font-bold ${colorClass}">${icon} ${title.split(' ')[0]}</span>: <span class="text-gray-600">${qText}</span> <span class="text-xs text-gray-400 float-right">${new Date().toLocaleTimeString()}</span>`;
            li.className = "border-b border-gray-100 pb-1 last:border-0 animate-[fadeIn_0.5s_ease-out]";
            
            historyList.prepend(li);
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</body>
</html>
