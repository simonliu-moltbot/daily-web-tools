<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç·šä¸Šæ“²ç­Š - æœ‰å•å¿…ç­” Bwa Bwei</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        
        /* 3D Perspective for the floor */
        .stage {
            perspective: 800px;
        }

        .block-container {
            width: 80px;
            height: 40px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }

        /* The Moon Block Shape */
        .moon-block {
            width: 80px;
            height: 40px;
            background-color: #d63031; /* Red */
            border-radius: 40px 40px 0 0; /* Semi-circle */
            position: absolute;
            transform-origin: bottom center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        /* Flat side (Yang) visual - lighter red */
        .flat-side {
            background-color: #ff7675;
            border-radius: 40px 40px 0 0;
            transform: rotateX(0deg); 
            /* Looks like flat top */
        }

        /* Round side (Yin) visual - darker red/rounded looking */
        .round-side {
            background-color: #c0392b;
            border-radius: 40px 40px 0 0;
            transform: rotateX(180deg);
            /* Looks like round back */
        }

        /* Animation Classes */
        .tossing {
            animation: toss 0.8s ease-in-out infinite;
        }

        @keyframes toss {
            0% { transform: translateY(0) rotateX(0) rotateZ(0); }
            25% { transform: translateY(-100px) rotateX(360deg) rotateZ(45deg); }
            50% { transform: translateY(-50px) rotateX(720deg) rotateZ(-45deg); }
            75% { transform: translateY(-20px) rotateX(1080deg) rotateZ(20deg); }
            100% { transform: translateY(0) rotateX(1440deg) rotateZ(0); }
        }

        /* Result States */
        .state-flat {
            /* Flat side up */
            transform: rotateX(0deg); 
        }
        .state-round {
            /* Round side up (flipped) */
            transform: rotateX(180deg); 
        }

    </style>
</head>
<body class="bg-stone-100 min-h-screen flex flex-col items-center">

    <!-- Header -->
    <div class="w-full max-w-md p-4 flex justify-between items-center">
        <a href="../../index.html" class="text-stone-600 hover:text-stone-900 font-medium flex items-center gap-1 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
            </svg>
            å›é¦–é 
        </a>
    </div>

    <!-- Main Content -->
    <main class="w-full max-w-md px-4 pb-12 flex flex-col items-center">
        
        <!-- Temple Title -->
        <div class="text-center mb-8">
            <div class="inline-block bg-red-700 text-amber-100 px-4 py-1 rounded-full text-xs font-bold mb-2 tracking-widest border-2 border-amber-400">
                æœ‰æ±‚å¿…æ‡‰
            </div>
            <h1 class="text-4xl font-bold text-stone-800 tracking-wider">ç·šä¸Šéˆç±¤</h1>
            <p class="text-stone-500 mt-2 text-sm">å¿ƒèª å‰‡éˆï¼Œè«‹åœ¨å¿ƒä¸­é»˜å¿µæ‚¨çš„å•é¡Œ</p>
        </div>

        <!-- The Altar (Interaction Area) -->
        <div class="bg-white w-full rounded-2xl shadow-xl p-8 border-t-8 border-red-700 relative overflow-hidden">
            <!-- Decorative background pattern (CSS optional) -->
            <div class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-red-50 rounded-full opacity-50"></div>
            
            <!-- Input Area -->
            <div class="mb-8 relative z-10">
                <input type="text" id="question" placeholder="åœ¨æ­¤è¼¸å…¥å•é¡Œ (å¯é¸)..." 
                    class="w-full border-b-2 border-stone-200 py-2 px-1 text-center text-lg focus:outline-none focus:border-red-500 bg-transparent transition-colors placeholder-stone-300">
            </div>

            <!-- The Blocks (Visuals) -->
            <div class="stage h-40 flex justify-center items-center gap-8 mb-8">
                <!-- Block Left -->
                <div id="block1" class="block-container transition-all duration-700">
                    <div class="moon-block flat-side absolute w-full h-full backface-hidden"></div> <!-- Front (Flat) -->
                    <div class="moon-block round-side absolute w-full h-full backface-hidden" style="transform: rotateX(180deg)"></div> <!-- Back (Round) -->
                </div>
                <!-- Block Right -->
                <div id="block2" class="block-container transition-all duration-700">
                    <div class="moon-block flat-side absolute w-full h-full backface-hidden"></div>
                    <div class="moon-block round-side absolute w-full h-full backface-hidden" style="transform: rotateX(180deg)"></div>
                </div>
            </div>

            <!-- Result Text -->
            <div id="result-area" class="text-center min-h-[5rem] mb-6 hidden animate-fade-in">
                <h2 id="result-title" class="text-3xl font-bold text-red-700 mb-1">è–ç­Š</h2>
                <p id="result-desc" class="text-stone-600">ç¥æ˜åŒæ„ï¼Œå¯ä»¥é€²è¡Œã€‚</p>
            </div>

            <!-- Action Button -->
            <button onclick="tossBlocks()" id="toss-btn" 
                class="w-full bg-red-600 hover:bg-red-700 text-amber-50 font-bold text-xl py-4 rounded-xl shadow-lg transform transition active:scale-95 flex justify-center items-center gap-2">
                <span>ğŸ™Œ</span> èª å¿ƒæ“²ç­Š
            </button>

            <!-- Streak Counter -->
            <div class="mt-6 flex justify-center">
                <div class="bg-stone-100 px-4 py-2 rounded-lg text-sm text-stone-600 font-medium">
                    é€£çºŒè–ç­Š: <span id="streak" class="text-red-600 font-bold text-lg">0</span>
                </div>
            </div>

        </div>

        <!-- Guide -->
        <div class="mt-8 grid grid-cols-3 gap-4 w-full text-center text-xs text-stone-400">
            <div>
                <div class="text-red-500 font-bold mb-1 text-base">è–ç­Š</div>
                ä¸€å¹³ä¸€å‡¸<br>YES
            </div>
            <div>
                <div class="text-stone-500 font-bold mb-1 text-base">ç¬‘ç­Š</div>
                å…©å¹³<br>ä¸æ˜/ç¬‘è€Œä¸èª
            </div>
            <div>
                <div class="text-stone-700 font-bold mb-1 text-base">é™°ç­Š</div>
                å…©å‡¸<br>NO/ç”Ÿæ°£
            </div>
        </div>

    </main>

    <footer class="text-center text-stone-300 text-xs pb-6">
        Created by AI Agent on <script>document.write(new Date().toISOString().split('T')[0])</script>
    </footer>

    <script>
        let streak = 0;
        const streakEl = document.getElementById('streak');
        const block1 = document.getElementById('block1');
        const block2 = document.getElementById('block2');
        const resultArea = document.getElementById('result-area');
        const resultTitle = document.getElementById('result-title');
        const resultDesc = document.getElementById('result-desc');
        const btn = document.getElementById('toss-btn');
        const questionInput = document.getElementById('question');

        function tossBlocks() {
            // Disable button
            btn.disabled = true;
            btn.classList.add('opacity-50');
            resultArea.classList.add('hidden');
            
            // Animation: Add tossing class (simplified simulation via CSS transforms in JS loop or just simple classes)
            // Actually, for 3D flip, we can just spin them.
            
            // Let's use a "shake" effect first, then land.
            let spinCount = 0;
            const interval = setInterval(() => {
                const r1 = Math.random() * 360;
                const r2 = Math.random() * 360;
                block1.style.transform = `rotateX(${r1}deg) rotateZ(${r1}deg)`;
                block2.style.transform = `rotateX(${r2}deg) rotateZ(-${r2}deg)`;
                spinCount++;
                if(spinCount > 15) { // Stop after ~1.5s
                    clearInterval(interval);
                    finalizeResult();
                }
            }, 100);
        }

        function finalizeResult() {
            // Determine result
            // 0 = Flat (Yang), 1 = Round (Yin)
            const b1 = Math.random() < 0.5 ? 0 : 1;
            const b2 = Math.random() < 0.5 ? 0 : 1;

            // Apply final rotation
            // Flat up = rotateX(0), Round up = rotateX(180)
            // Add some random Z rotation for realism (landing messily)
            const z1 = Math.floor(Math.random() * 60) - 30; // -30 to 30
            const z2 = Math.floor(Math.random() * 60) - 30;

            const finalRot1 = b1 === 0 ? 0 : 180;
            const finalRot2 = b2 === 0 ? 0 : 180;

            block1.style.transform = `rotateX(${finalRot1}deg) rotateZ(${z1}deg)`;
            block2.style.transform = `rotateX(${finalRot2}deg) rotateZ(${z2}deg)`;

            // Logic
            // 0+0 = Flat+Flat = Smile (Xiao)
            // 1+1 = Round+Round = No (Yin)
            // 0+1 or 1+0 = Sheng
            
            let title = "";
            let desc = "";
            let isSheng = false;

            if (b1 === 0 && b2 === 0) {
                title = "ç¬‘ç­Š (XiÃ o JiÇo)";
                desc = "ç¥æ˜ç¬‘è€Œä¸èªï¼Œæˆ–æ˜¯å•é¡Œä¸æ¸…æ¥šã€‚è«‹èª å¿ƒé‡æ–°ç™¼å•ã€‚";
                streak = 0;
            } else if (b1 === 1 && b2 === 1) {
                title = "é™°ç­Š (YÄ«n JiÇo)";
                desc = "ç¥æ˜è¡¨ç¤ºï¼šä¸å¯ã€ä¸å°ã€æ™‚æ©Ÿæœªåˆ°ã€‚";
                streak = 0;
            } else {
                title = "è–ç­Š (ShÃ¨ng JiÇo)";
                desc = "ç¥æ˜åŒæ„ï¼é€™æ˜¯å¥½çš„å¾µå…†ã€‚";
                isSheng = true;
                streak++;
            }

            // Update UI after small delay to let animation settle
            setTimeout(() => {
                resultTitle.innerText = title;
                resultDesc.innerText = desc;
                
                // Color logic
                if (isSheng) {
                    resultTitle.className = "text-3xl font-bold text-red-600 mb-1";
                } else if (title.includes("é™°")) {
                    resultTitle.className = "text-3xl font-bold text-stone-700 mb-1";
                } else {
                    resultTitle.className = "text-3xl font-bold text-amber-600 mb-1";
                }

                resultArea.classList.remove('hidden');
                streakEl.innerText = streak;
                
                // Re-enable button
                btn.disabled = false;
                btn.classList.remove('opacity-50');
            }, 500);
        }
    </script>
</body>
</html>
