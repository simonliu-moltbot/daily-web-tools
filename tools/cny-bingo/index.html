<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>éå¹´é•·è¼©å•å€™èª Bingo | CNY Relative ClichÃ© Bingo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #8b0000; color: #fff; }
        .bingo-tile { aspect-ratio: 1 / 1; transition: all 0.3s; cursor: pointer; }
        .bingo-tile.marked { background-color: #ffd700 !important; color: #8b0000 !important; transform: scale(0.95); font-weight: bold; }
        .festive-border { border: 4px solid #ffd700; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-8 px-4" x-data="bingoApp()">

    <!-- Header -->
    <header class="text-center mb-8">
        <h1 class="text-3xl font-bold text-yellow-400 mb-2">ğŸ§§ éå¹´é•·è¼©å•å€™ Bingo</h1>
        <p class="text-yellow-200 text-sm">èšé¤å¿…å‚™ï¼è½åˆ°å“ªå¥é»å“ªå¥ï¼Œé€£æˆç·šå°±è´äº†ï¼</p>
    </header>

    <!-- Bingo Grid -->
    <div class="w-full max-w-md bg-red-900 p-4 rounded-xl festive-border shadow-2xl">
        <div class="grid grid-cols-4 gap-2">
            <template x-for="(item, index) in board" :key="index">
                <div class="bingo-tile bg-red-800 border border-red-700 rounded-lg flex items-center justify-center p-2 text-center text-[10px] md:text-xs leading-tight shadow-inner"
                     :class="{'marked': marked.includes(index)}"
                     @click="toggleMark(index)">
                    <span x-text="item"></span>
                </div>
            </template>
        </div>
    </div>

    <!-- Win Message -->
    <div x-show="isWinner" x-transition x-cloak class="mt-6 p-4 bg-yellow-400 text-red-900 font-bold rounded-lg animate-bounce text-center w-full max-w-md">
        ğŸŠ æ­å–œï¼ä½ é”æˆ BINGO äº†ï¼ ğŸŠ<br>
        çœ‹ä¾†ä½ ä»Šå¹´æ·±å—é•·è¼©ã€Œé—œæ„›ã€å‘¢ï¼
    </div>

    <!-- Controls -->
    <div class="mt-8 flex flex-col gap-4 w-full max-w-md">
        <button @click="resetBoard()" class="bg-yellow-500 hover:bg-yellow-400 text-red-900 font-bold py-3 rounded-full transition transform active:scale-95 shadow-lg">
            æ›ä¸€å¼µæ–°çš„å¡ç‰‡
        </button>
        <button @click="share()" class="bg-red-700 hover:bg-red-600 text-white font-bold py-2 rounded-full border border-red-500 text-sm transition">
            åˆ†äº«çµ¦æ­£åœ¨å—é›£çš„æœ‹å‹
        </button>
    </div>

    <!-- Footer -->
    <footer class="mt-12 text-yellow-500/50 text-[10px] text-center">
        åƒ…ä¾›éå¹´å¨›æ¨‚ï¼Œè«‹ä»¥å®¶åº­å’Œè«§ç‚ºæº– | Simon's AI Bot ç¥æ‚¨æ–°å¹´å¿«æ¨‚
    </footer>

    <script>
        function bingoApp() {
            const phrases = [
                "ä»€éº¼æ™‚å€™çµå©šï¼Ÿ", "è–ªæ°´é ˜å¤šå°‘ï¼Ÿ", "è²·æˆ¿äº†å—ï¼Ÿ", "æ€éº¼ä¸åƒå¤šé»ï¼Ÿ",
                "å°æ™‚å€™æˆ‘æŠ±éä½ ", "å¹´çµ‚é ˜å¹¾å€‹æœˆï¼Ÿ", "æœ‰æ²’æœ‰å°è±¡ï¼Ÿ", "å·¥ä½œç©©ä¸ç©©å®šï¼Ÿ",
                "æ€éº¼é‚„ä¸ç”Ÿå°å­©ï¼Ÿ", "é‚£å€‹èª°å®¶å°å­©...", "è¦å¤šè·Ÿé•·è¼©å­¸ç¿’", "ç¾åœ¨æ™¯æ°£ä¸å¥½å–”",
                "ä¸è¦ä¸€ç›´ç©æ‰‹æ©Ÿ", "é€™å€‹å¥½åƒå¤šåƒé»", "è®Šæ¼‚äº®/å¸¥äº†å–”", "ç¾åœ¨å“ªè£¡ä¸Šç­ï¼Ÿ",
                "è€ƒä¸è€ƒæ…®è€ƒå…¬å‹™å“¡ï¼Ÿ", "ä»€éº¼æ™‚å€™å›ä¾†çš„ï¼Ÿ", "æ˜å¹´ä»€éº¼æ™‚å€™æ”¾å‡ï¼Ÿ", "ç¾åœ¨å¤§å­¸å¥½è€ƒå—ï¼Ÿ",
                "é€™æ˜¯æˆ‘çš„ä¸€é»å¿ƒæ„", "æ­å–œç™¼è²¡ç´…åŒ…æ‹¿ä¾†", "è½èªªä½ åœ¨åšAIï¼Ÿ", "å¹«æˆ‘ä¿®å€‹é›»è…¦...",
                "å¹´ç´€ä¸å°äº†å–”", "è¦æœ‰å„²è“„ç¿’æ…£", "èº«é«”è¦é¡§å¥½", "ä»€éº¼æ™‚å€™è²·è»Šï¼Ÿ",
                "ç¾åœ¨æœˆè–ªå¤šå°‘ï¼Ÿ", "æœ‰æ²’æœ‰æ‹¿çé‡‘ï¼Ÿ", "å°åŒ—ç‰©åƒ¹å¾ˆé«˜å§ï¼Ÿ", "æ€éº¼é‚„æ²’è²·æˆ¿ï¼Ÿ",
                "ä½ æ˜¯åšä»€éº¼å·¥ä½œçš„ï¼Ÿ", "è¦ä¸è¦å¹«ä½ ä»‹ç´¹å°è±¡ï¼Ÿ", "èª°èª°èª°å·²ç¶“ç”Ÿç¬¬äºŒå€‹äº†", "ä½ æ˜¯ä¸æ˜¯èƒ–äº†ï¼Ÿ",
                "ä½ æ˜¯ä¸æ˜¯ç˜¦äº†ï¼Ÿ", "æœ€è¿‘è‚¡ç¥¨è³ºå¤šå°‘ï¼Ÿ", "æ‰“ç®—ä»€éº¼æ™‚å€™ç”Ÿï¼Ÿ", "å…¬å‹™å“¡ç¦åˆ©æ¯”è¼ƒå¥½",
                "é‚£å€‹è¦ªæˆšçš„å°å­©è€ƒä¸Š...", "è¦å¤šå–ç†±æ°´", "ç¾åœ¨å¹´è¼•äººæŠ—å£“æ€§...", "æˆ‘å€‘ä»¥å‰é‚£å€‹å¹´ä»£...",
                "ä½ è¦å¤šè½é•·è¼©çš„è©±", "ä»€éº¼æ™‚å€™è¦è«‹å®¢ï¼Ÿ", "ç´…åŒ…åŒ…çµ¦çˆ¶æ¯å¤šå°‘ï¼Ÿ", "ç¾åœ¨é€™è¡Œç©©å®šå—ï¼Ÿ",
                "ä»¥å¾Œæ‰“ç®—å›è€å®¶å—ï¼Ÿ", "èº«é«”å¥åº·æœ€é‡è¦", "æ—©é»ç¡ä¸è¦ç†¬å¤œ", "ä½ çœ‹é‚£å€‹èª°...",
                "æœ‰æ²’æœ‰æ‰“ç®—å‡ºåœ‹ï¼Ÿ", "è¦å­˜éŒ¢ä¸è¦äº‚èŠ±", "ä½ é‚„è¨˜å¾—æˆ‘å—ï¼Ÿ", "è¶Šä¾†è¶Šå‡ºæ¯äº†å–”",
                "æœ‰æ²’æœ‰äº¤å¥³æœ‹å‹ï¼Ÿ", "æœ‰æ²’æœ‰äº¤ç”·æœ‹å‹ï¼Ÿ", "å¤§åŸå¸‚å£“åŠ›å¾ˆå¤§å§ï¼Ÿ", "å›ä¾†è€ƒå…¬è·å•¦",
                "ä½ è¦å¤šåƒé»é’èœ", "ç¾åœ¨AIæœƒå–ä»£ä½ å—ï¼Ÿ", "é€™æ‰‹æ©Ÿå¤šå°‘éŒ¢ï¼Ÿ", "é€™è¡£æœåœ¨å“ªè²·çš„ï¼Ÿ",
                "å¹´ç´€åˆ°äº†è¦è¶•å¿«", "ä½ è¦æœ‰é•·é è¦åŠƒ", "ç¾åœ¨å‰µæ¥­å¾ˆé›£å–”", "å¹«æˆ‘çœ‹çœ‹å¹³æ¿æ€éº¼..."
            ];

            return {
                board: [],
                marked: [],
                isWinner: false,

                init() {
                    this.resetBoard();
                },

                resetBoard() {
                    // Shuffle and pick 16
                    const shuffled = [...phrases].sort(() => 0.5 - Math.random());
                    this.board = shuffled.slice(0, 16);
                    this.marked = [];
                    this.isWinner = false;
                },

                toggleMark(index) {
                    if (this.marked.includes(index)) {
                        this.marked = this.marked.filter(i => i !== index);
                    } else {
                        this.marked.push(index);
                    }
                    this.checkWin();
                },

                checkWin() {
                    const size = 4;
                    const winningLines = [
                        // Rows
                        [0, 1, 2, 3], [4, 5, 6, 7], [8, 9, 10, 11], [12, 13, 14, 15],
                        // Cols
                        [0, 4, 8, 12], [1, 5, 9, 13], [2, 6, 10, 14], [3, 7, 11, 15],
                        // Diagonals
                        [0, 5, 10, 15], [3, 6, 9, 12]
                    ];

                    this.isWinner = winningLines.some(line => 
                        line.every(idx => this.marked.includes(index => index === idx || index.toString() === idx.toString()))
                    );
                    
                    // Fixed logic for win check
                    this.isWinner = winningLines.some(line => 
                        line.every(idx => this.marked.includes(idx))
                    );
                },

                share() {
                    const text = "æˆ‘æ­£åœ¨ç©éå¹´é•·è¼©å•å€™ Bingoï¼Œå¿«æ•‘æˆ‘ï¼";
                    if (navigator.share) {
                        navigator.share({ title: 'éå¹´ Bingo', text: text, url: window.location.href });
                    } else {
                        alert("è¤‡è£½é€£çµçµ¦æœ‹å‹ï¼š " + window.location.href);
                    }
                }
            }
        }
    </script>
</body>
</html>
