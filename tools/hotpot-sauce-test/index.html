<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ² å°ç£ç«é‹æ²¾é†¬å¿ƒç†æ¸¬é©— | Hot Pot Sauce Personality Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #fef2f2; }
        .sauce-bowl {
            background: radial-gradient(circle at 30% 30%, #fefce8, #fcd34d);
            box-shadow: inset 0 -10px 20px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.1);
        }
        .ingredient-btn {
            transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .ingredient-btn:active {
            transform: scale(0.95);
        }
        .drop-anim {
            animation: dropIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes dropIn {
            0% { transform: scale(0) translateY(-20px); opacity: 0; }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col text-stone-800">
    
    <!-- Nav -->
    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-red-100">
        <div class="max-w-4xl mx-auto px-4 h-14 flex items-center justify-between">
            <a href="../../index.html" class="text-stone-600 hover:text-stone-900 font-medium flex items-center gap-2">
                <span>ğŸ </span> <span class="hidden sm:inline">å›é¦–é  (Back)</span>
            </a>
            <h1 class="font-bold text-lg text-red-800">ğŸ² æ²¾é†¬å¿ƒç†æ¸¬é©—</h1>
            <div class="w-8"></div> <!-- Spacer -->
        </div>
    </nav>

    <main class="flex-1 max-w-2xl mx-auto w-full px-4 py-8 flex flex-col items-center">
        
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-stone-800 mb-2">ä½ çš„éˆé­‚æ˜¯ä»€éº¼å‘³é“ï¼Ÿ</h2>
            <p class="text-stone-500">é…å‡ºä½ çš„é»ƒé‡‘æ¯”ä¾‹æ²¾é†¬ï¼ŒAI å¹«ä½ åˆ†æéš±è—æ€§æ ¼ï¼</p>
        </div>

        <!-- The Bowl -->
        <div class="relative w-64 h-64 sm:w-80 sm:h-80 rounded-full sauce-bowl flex items-center justify-center mb-8 border-4 border-white ring-4 ring-red-50 relative overflow-hidden group cursor-pointer" id="bowl-area" onclick="shakeBowl()">
            <div class="absolute inset-0 bg-black/5 rounded-full pointer-events-none"></div>
            <div id="sauce-content" class="relative z-10 w-full h-full p-8 flex flex-wrap items-center justify-center content-center gap-1 transition-all">
                <span class="text-stone-400 text-sm font-medium select-none pointer-events-none" id="bowl-placeholder">é»æ“Šä¸‹æ–¹é…æ–™<br>åŠ å…¥ç¢—ä¸­</span>
            </div>
            <!-- Steam effect -->
            <div class="absolute -top-10 left-1/2 -translate-x-1/2 w-20 h-20 bg-white/20 blur-xl rounded-full animate-pulse pointer-events-none"></div>
        </div>

        <!-- Action Bar -->
        <div class="flex gap-4 mb-8 w-full justify-center">
            <button onclick="resetBowl()" class="px-6 py-2 rounded-full bg-stone-200 hover:bg-stone-300 text-stone-600 font-bold transition-colors shadow-sm">
                ğŸ—‘ï¸ æ¸…ç©ºé‡ä¾†
            </button>
            <button onclick="analyzeSauce()" class="px-8 py-2 rounded-full bg-red-600 hover:bg-red-700 text-white font-bold transition-colors shadow-lg animate-bounce">
                âœ¨ é–‹å§‹åˆ†æ
            </button>
        </div>

        <!-- Ingredients Grid -->
        <div class="grid grid-cols-4 sm:grid-cols-5 gap-3 w-full mb-12">
            <!-- Buttons injected by JS -->
        </div>

        <!-- Result Modal (Hidden) -->
        <div id="result-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] hidden flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all scale-95 opacity-0" id="result-card">
                <div class="text-center">
                    <div class="text-6xl mb-4" id="result-icon">ğŸ¤”</div>
                    <h3 class="text-2xl font-bold text-stone-800 mb-2" id="result-title">åˆ†æä¸­...</h3>
                    <div class="w-full h-px bg-stone-100 my-4"></div>
                    <p class="text-stone-600 leading-relaxed mb-6" id="result-desc">...</p>
                    
                    <div class="bg-stone-50 rounded-lg p-4 mb-6 text-sm text-left">
                        <div class="flex justify-between mb-2">
                            <span class="text-stone-500">éˆ‰å«é‡æŒ‡æ•¸ (Salty)</span>
                            <span class="font-bold text-stone-800" id="stat-salty">0%</span>
                        </div>
                        <div class="w-full bg-stone-200 rounded-full h-2 mb-4">
                            <div class="bg-blue-500 h-2 rounded-full transition-all duration-1000" id="bar-salty" style="width: 0%"></div>
                        </div>

                        <div class="flex justify-between mb-2">
                            <span class="text-stone-500">ç†±é‡ç½ªæƒ¡æ„Ÿ (Fat)</span>
                            <span class="font-bold text-stone-800" id="stat-fat">0%</span>
                        </div>
                        <div class="w-full bg-stone-200 rounded-full h-2">
                            <div class="bg-red-500 h-2 rounded-full transition-all duration-1000" id="bar-fat" style="width: 0%"></div>
                        </div>
                    </div>

                    <button onclick="closeModal()" class="w-full py-3 rounded-xl bg-stone-900 text-white font-bold hover:bg-stone-800 transition-colors">
                        å†ç©ä¸€æ¬¡
                    </button>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-stone-50 border-t border-stone-200 py-8 text-center text-stone-400 text-sm">
        <p>Created by AI Agent on 2026-02-08</p>
        <p class="mt-1 text-xs">ç´”å±¬å¨›æ¨‚ï¼Œè«‹å‹¿å°‡æ‰‹æ©Ÿä¸Ÿå…¥ç«é‹ä¸­</p>
    </footer>

    <script>
        const ingredients = [
            { id: 'satay', name: 'æ²™èŒ¶é†¬', icon: 'ğŸŸ¤', color: 'text-amber-800', salty: 15, fat: 25 },
            { id: 'soy', name: 'é†¬æ²¹', icon: 'âš«ï¸', color: 'text-stone-900', salty: 20, fat: 0 },
            { id: 'scallion', name: 'è”¥èŠ±', icon: 'ğŸ§…', color: 'text-green-600', salty: 0, fat: 0 },
            { id: 'garlic', name: 'è’œæ³¥', icon: 'ğŸ§„', color: 'text-yellow-100', salty: 2, fat: 0 },
            { id: 'chili', name: 'è¾£æ¤’', icon: 'ğŸŒ¶ï¸', color: 'text-red-600', salty: 5, fat: 0 },
            { id: 'vinegar', name: 'ç™½é†‹', icon: 'âšªï¸', color: 'text-stone-200', salty: 2, fat: 0 },
            { id: 'radish', name: 'è˜¿è””æ³¥', icon: 'ğŸŒ¨ï¸', color: 'text-white', salty: 0, fat: 0 },
            { id: 'egg', name: 'ç”Ÿè›‹é»ƒ', icon: 'ğŸ¥š', color: 'text-yellow-400', salty: 2, fat: 15 },
            { id: 'cilantro', name: 'é¦™èœ', icon: 'ğŸŒ¿', color: 'text-green-500', salty: 0, fat: 0 },
            { id: 'peanut', name: 'èŠ±ç”Ÿç²‰', icon: 'ğŸ¥œ', color: 'text-amber-600', salty: 5, fat: 20 },
            { id: 'sugar', name: 'ç ‚ç³–', icon: 'ğŸ§‚', color: 'text-white', salty: 0, fat: 15 },
            { id: 'sesame', name: 'é¦™æ²¹', icon: 'ğŸ’§', color: 'text-yellow-600', salty: 0, fat: 30 }
        ];

        let bowl = [];

        function init() {
            const grid = document.querySelector('.grid');
            grid.innerHTML = ingredients.map(ing => `
                <button onclick="add('${ing.id}')" class="ingredient-btn bg-white p-3 rounded-xl border border-stone-200 shadow-sm hover:shadow-md flex flex-col items-center gap-1 group">
                    <span class="text-3xl filter group-hover:drop-shadow-md transition-all transform group-hover:-translate-y-1">${ing.icon}</span>
                    <span class="text-xs font-bold text-stone-600">${ing.name}</span>
                </button>
            `).join('');
        }

        function add(id) {
            if (bowl.length >= 20) {
                alert('ç¢—æ»¿äº†å•¦ï¼ä½ æ˜¯è¦æŠŠç«é‹åº—åƒå€’å—ï¼Ÿ');
                return;
            }
            const ing = ingredients.find(i => i.id === id);
            bowl.push(ing);
            renderBowl();
            playAudio(id); // Placeholder
        }

        function renderBowl() {
            const container = document.getElementById('sauce-content');
            const placeholder = document.getElementById('bowl-placeholder');
            
            if (bowl.length === 0) {
                placeholder.style.display = 'block';
                container.innerHTML = '<span class="text-stone-400 text-sm font-medium select-none pointer-events-none" id="bowl-placeholder">é»æ“Šä¸‹æ–¹é…æ–™<br>åŠ å…¥ç¢—ä¸­</span>';
                return;
            } else {
                placeholder.style.display = 'none';
            }

            // Grouping identical items slightly? No, just pile them.
            // But we want to re-render only the new one?
            // For simplicity, re-render all, but apply animation class to the last one.
            
            // Actually, innerHTML rewrite kills animation. 
            // Better: append.
            // But let's just re-render and animate only the last child.
            
            container.innerHTML = bowl.map((item, idx) => {
                // Randomize position slightly for "pile" effect
                const rot = (Math.random() - 0.5) * 45;
                const scale = 0.8 + Math.random() * 0.4;
                return `<div class="drop-anim text-2xl absolute transition-all" style="
                    left: ${50 + (Math.random()-0.5)*60}%; 
                    top: ${50 + (Math.random()-0.5)*60}%; 
                    transform: translate(-50%, -50%) rotate(${rot}deg) scale(${scale});
                    z-index: ${idx};
                    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2));
                ">${item.icon}</div>`;
            }).join('');
        }

        function resetBowl() {
            bowl = [];
            renderBowl();
        }

        function shakeBowl() {
            const b = document.getElementById('bowl-area');
            b.classList.add('animate-spin'); // bad anim
            // Custom shake
            b.animate([
                { transform: 'translate(0, 0) rotate(0deg)' },
                { transform: 'translate(-5px, 0) rotate(-5deg)' },
                { transform: 'translate(5px, 0) rotate(5deg)' },
                { transform: 'translate(0, 0) rotate(0deg)' }
            ], { duration: 300 });
        }

        function analyzeSauce() {
            if (bowl.length === 0) {
                showResult('ğŸ¥£', 'åŸå‘³è¦ºé†’è€… (The Purist)', 'ä½ ç›¸ä¿¡é£Ÿæçš„éˆé­‚ï¼Œæˆ–è€…ä½ æ­£åœ¨æ¸›è‚¥ã€‚ä½ çš„ç”Ÿæ´»æ¥µç°¡ï¼Œæˆ–è€…æ˜¯å¿˜äº†æ‹¿é†¬æ–™ã€‚', 0, 0);
                return;
            }

            const counts = {};
            let totalSalty = 0;
            let totalFat = 0;

            bowl.forEach(i => {
                counts[i.id] = (counts[i.id] || 0) + 1;
                totalSalty += i.salty;
                totalFat += i.fat;
            });

            // Logic
            let title = "ä¸­åº¸ä¹‹é“ (The Balancer)";
            let desc = "ä½ çš„é†¬æ–™å››å¹³å…«ç©©ï¼Œå°±åƒä½ çš„äººç”Ÿä¸€æ¨£å®‰å…¨ã€‚ä¸å¥½ä¹Ÿä¸å£ï¼Œä½†ä¹Ÿè¨±ç¼ºäº†ä¸€é»é©šå–œï¼Ÿ";
            let icon = "âš–ï¸";

            if (counts['satay'] >= 4) {
                title = "æ²™èŒ¶ç‹‚é­” (Satay Demon)";
                desc = "å°ä½ ä¾†èªªï¼Œç«é‹åªæ˜¯è¼‰é«”ï¼Œæ²™èŒ¶é†¬æ‰æ˜¯æœ¬é«”ã€‚ä½ çš„è¡€ç®¡è£¡æµçš„å¯èƒ½ä¸æ˜¯è¡€ï¼Œæ˜¯ç‰›é ­ç‰Œã€‚";
                icon = "ğŸ‘¹";
            } else if (counts['cilantro'] >= 3) {
                title = "é¦™èœé‚ªæ•™å¾’ (Cilantro Cultist)";
                desc = "ä½ çš„ç¢—è£¡æœ‰ä¸€åº§æ£®æ—ã€‚ä½ å–œæ­¡çœ‹è‘—ä¸åƒé¦™èœçš„äººéœ²å‡ºææ‡¼çš„è¡¨æƒ…ã€‚ä½ æ˜¯æ··äº‚å–„è‰¯çš„ä»£è¡¨ã€‚";
                icon = "ğŸŒ¿";
            } else if (counts['garlic'] >= 4) {
                title = "ç”ŸåŒ–æ­¦å™¨å°ˆå®¶ (Garlic Breath)";
                desc = "æ–¹åœ“äº”ç™¾é‡Œå…§ç„¡äººèƒ½è¿‘èº«ã€‚ä½ éå¸¸é‡è¦–ç¤¾äº¤è·é›¢ï¼Œå°¤å…¶æ˜¯ç‰©ç†ä¸Šçš„ã€‚";
                icon = "ğŸ§„";
            } else if (counts['chili'] >= 4) {
                title = "éµå–‰åš¨ (Lava Throat)";
                desc = "ä½ çš„èˆŒé ­å·²ç¶“å¤±å»çŸ¥è¦ºï¼Œä½ çš„èƒƒæ­£åœ¨å¯«éºæ›¸ã€‚ä½†é€™ä¸€åˆ»ï¼Œä½ è¦ºå¾—å¾ˆçˆ½ã€‚";
                icon = "ğŸ”¥";
            } else if (counts['egg'] >= 2) {
                title = "æ²™é–€æ°èŒè³­å¾’ (Salmonella Gambler)";
                desc = "åªæœ‰çœŸæ­£çš„è€é¥•æ‰æ‡‚ç”Ÿè›‹é»ƒæ‹Œæ²™èŒ¶çš„ç¾å‘³ã€‚ä½ æ˜¯ä¸€å€‹æ‡·èˆŠä¸”å‹‡æ•¢çš„äººï¼Œå°å°ç£çš„è¡›ç”Ÿæ¨™æº–å……æ»¿ä¿¡å¿ƒã€‚";
                icon = "ğŸ¥š";
            } else if (counts['scallion'] >= 5) {
                title = "è”¥èŠ±å¯Œç¿ (Scallion Thief)";
                desc = "ä½ æ˜¯ä¾†åƒç«é‹é‚„æ˜¯ä¾†è²·èœçš„ï¼Ÿè€é—†çœ‹åˆ°ä½ èµ°é€²ä¾†éƒ½æœƒå…ˆæŠŠè”¥è—èµ·ä¾†ã€‚";
                icon = "ğŸ§…";
            } else if (counts['vinegar'] >= 4) {
                title = "é†‹ç½ˆå­ (Acid Reflux King)";
                desc = "ä½ å–œæ­¡é…¸æºœæºœçš„æ»‹å‘³ï¼Œå¯èƒ½ç”Ÿæ´»æœ‰é»è‹¦ï¼Ÿé€™ç¢—é†¬èƒ½å¹«ä½ è§£è†©ï¼Œä¹Ÿèƒ½å¹«ä½ è§£æ†‚ã€‚";
                icon = "ğŸ‹";
            } else if (counts['sugar'] >= 3 || counts['peanut'] >= 3) {
                title = "å°å—ç”œå¿ƒ (Tainan Sweetheart)";
                desc = "ä½ æ˜¯ä¸æ˜¯å°å—äººï¼Ÿå¦‚æœæ˜¯ï¼Œé€™å¾ˆæ­£å¸¸ã€‚å¦‚æœä¸æ˜¯ï¼Œä½ å¯èƒ½éœ€è¦æª¢æŸ¥ä¸€ä¸‹è¡€ç³–ã€‚";
                icon = "ğŸ¬";
            }

            // Calc stats (max ref = 100 roughly)
            const saltyPct = Math.min(100, (totalSalty / 80) * 100);
            const fatPct = Math.min(100, (totalFat / 100) * 100);

            showResult(icon, title, desc, Math.round(saltyPct), Math.round(fatPct));
        }

        function showResult(icon, title, desc, salty, fat) {
            document.getElementById('result-icon').textContent = icon;
            document.getElementById('result-title').textContent = title;
            document.getElementById('result-desc').textContent = desc;
            
            document.getElementById('stat-salty').textContent = salty + '%';
            document.getElementById('stat-fat').textContent = fat + '%';
            
            const modal = document.getElementById('result-modal');
            const card = document.getElementById('result-card');
            
            modal.classList.remove('hidden');
            // Trigger anim
            setTimeout(() => {
                card.classList.remove('scale-95', 'opacity-0');
                card.classList.add('scale-100', 'opacity-100');
                
                document.getElementById('bar-salty').style.width = salty + '%';
                document.getElementById('bar-fat').style.width = fat + '%';
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('result-modal');
            const card = document.getElementById('result-card');
            
            card.classList.remove('scale-100', 'opacity-100');
            card.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                document.getElementById('bar-salty').style.width = '0%';
                document.getElementById('bar-fat').style.width = '0%';
            }, 200);
        }

        init();
    </script>
</body>
</html>