<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èœå¸‚å ´æ®ºåƒ¹ç‹ | Market Bargain King</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; }
        .game-card { background: white; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .speech-bubble {
            position: relative;
            background: #fff;
            border-radius: .4em;
            padding: 1rem;
            border: 2px solid #e5e7eb;
        }
        .speech-bubble:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 0;
            border: 12px solid transparent;
            border-top-color: #e5e7eb;
            border-bottom: 0;
            margin-left: -12px;
            margin-bottom: -12px;
        }
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-6 px-4">

    <!-- Header -->
    <div class="w-full max-w-md flex justify-between items-center mb-6">
        <a href="../../index.html" class="text-gray-500 hover:text-gray-800 transition-colors flex items-center gap-1 font-medium text-sm">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
            å›é¦–é 
        </a>
        <span class="text-xs text-gray-400">Daily Web Tool</span>
    </div>

    <!-- Title -->
    <div class="text-center mb-6">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">ğŸ¥¬ èœå¸‚å ´æ®ºåƒ¹ç‹</h1>
        <p class="text-gray-600 text-sm">Market Bargain King</p>
    </div>

    <!-- Game Container -->
    <div id="game-container" class="w-full max-w-md game-card p-6 relative overflow-hidden">
        
        <!-- Start Screen -->
        <div id="screen-start" class="text-center py-8">
            <div class="text-6xl mb-4">ğŸ‘µ</div>
            <h2 class="text-xl font-bold mb-4">æŒ‘æˆ°èœå¸‚å ´é˜¿å§¨ï¼</h2>
            <p class="text-gray-600 mb-6 text-sm leading-relaxed">
                ä½ åœ¨å¸‚å ´çœ‹åˆ°ä¸€ä»¶å¿ƒå„€çš„å•†å“ï¼Œä½†é˜¿å§¨é–‹åƒ¹å¤ªé«˜äº†ã€‚<br>
                é‹ç”¨ä½ çš„æ™ºæ…§ã€å£æ‰èˆ‡åšè‡‰çš®ï¼Œ<br>
                åœ¨é˜¿å§¨å¤±å»è€å¿ƒæŠŠä½ è¶•èµ°ä¹‹å‰ï¼Œ<br>
                ç”¨æœ€ä½çš„åƒ¹æ ¼æˆäº¤ï¼
            </p>
            <button onclick="startGame()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition shadow-lg transform active:scale-95">
                é–‹å§‹æ®ºåƒ¹ï¼
            </button>
        </div>

        <!-- Play Screen -->
        <div id="screen-play" class="hidden flex flex-col h-full">
            
            <!-- Stats Bar -->
            <div class="flex justify-between items-center mb-6 bg-gray-50 p-3 rounded-lg border border-gray-100">
                <div class="text-center">
                    <div class="text-xs text-gray-400">ç›®å‰å‡ºåƒ¹</div>
                    <div class="text-xl font-bold text-green-600">$<span id="price-display">0</span></div>
                </div>
                <div class="text-center w-1/3">
                    <div class="text-xs text-gray-400">é˜¿å§¨è€å¿ƒ</div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mt-1">
                        <div id="patience-bar" class="bg-blue-500 h-2.5 rounded-full transition-all duration-300" style="width: 100%"></div>
                    </div>
                </div>
            </div>

            <!-- Auntie Area -->
            <div class="flex-1 flex flex-col items-center justify-center mb-6">
                <div id="auntie-bubble" class="speech-bubble mb-4 text-center text-gray-800 font-medium w-full">
                    å¸¥å“¥ï¼Œé€™ä»¶è¡£æœç®—ä½ ä¾¿å®œå•¦ï¼
                </div>
                <div id="auntie-face" class="text-7xl transition-transform duration-300 transform hover:scale-110 cursor-pointer">ğŸ‘µ</div>
                <div id="item-name" class="mt-2 text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full"></div>
            </div>

            <!-- Actions -->
            <div class="grid grid-cols-2 gap-3">
                <button onclick="action('praise')" class="bg-pink-100 hover:bg-pink-200 text-pink-700 font-bold py-3 px-2 rounded-lg text-sm transition">
                    ğŸ¥° ç¨±è®šé˜¿å§¨<br><span class="text-[10px] font-normal text-pink-500">è€å¿ƒ++ åƒ¹æ ¼-</span>
                </button>
                <button onclick="action('poor')" class="bg-yellow-100 hover:bg-yellow-200 text-yellow-700 font-bold py-3 px-2 rounded-lg text-sm transition">
                    ğŸ’¸ å“­çª®è£å­¸ç”Ÿ<br><span class="text-[10px] font-normal text-yellow-600">è€å¿ƒ- åƒ¹æ ¼--</span>
                </button>
                <button onclick="action('flaw')" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-3 px-2 rounded-lg text-sm transition">
                    ğŸ” æŒ‘æ¯›ç—…<br><span class="text-[10px] font-normal text-gray-500">è€å¿ƒ--- åƒ¹æ ¼---</span>
                </button>
                <button onclick="action('walk')" class="bg-red-100 hover:bg-red-200 text-red-700 font-bold py-3 px-2 rounded-lg text-sm transition">
                    ğŸƒ å‡è£è¦èµ°<br><span class="text-[10px] font-normal text-red-500">è³­ä¸€æŠŠå¤§çš„</span>
                </button>
                <button onclick="acceptDeal()" class="col-span-2 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg mt-2 shadow-md">
                    ğŸ¤ å°±é€™å€‹åƒ¹æ ¼æˆäº¤ï¼
                </button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="screen-result" class="hidden text-center py-6">
            <div id="result-emoji" class="text-6xl mb-4">ğŸ‰</div>
            <h2 id="result-title" class="text-2xl font-bold mb-2">æˆäº¤ï¼</h2>
            <p id="result-desc" class="text-gray-600 mb-6 px-4"></p>
            
            <div class="bg-gray-50 rounded-lg p-4 mb-6 mx-4">
                <div class="flex justify-between mb-2 border-b border-gray-200 pb-2">
                    <span class="text-gray-500">æœ€çµ‚åƒ¹æ ¼</span>
                    <span class="font-bold text-gray-800">$<span id="final-price"></span></span>
                </div>
                <div class="flex justify-between mb-2 border-b border-gray-200 pb-2">
                    <span class="text-gray-500">åŸåƒ¹</span>
                    <span class="text-gray-800 line-through">$<span id="original-price"></span></span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-500">çœä¸‹</span>
                    <span class="font-bold text-green-600">$<span id="saved-amount"></span></span>
                </div>
            </div>

            <button onclick="startGame()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg transition shadow-md">
                å†ç©ä¸€æ¬¡
            </button>
        </div>

    </div>

    <!-- Footer -->
    <footer class="mt-8 text-center text-xs text-gray-400">
        <p>Created by AI Agent on 2026-02-07</p>
    </footer>

    <script>
        const ITEMS = [
            { name: "ç•¶å­£é«˜éº—èœ", price: 120, min: 40 },
            { name: "æ‰‹å·¥çœŸçš®çš®å¸¶", price: 890, min: 250 },
            { name: "æ½®ç‰Œç›œç‰ˆTæ¤", price: 490, min: 150 },
            { name: "é˜¿å¬¤ç¨®çš„çµ²ç“œ", price: 80, min: 20 },
            { name: "æ·±æµ·å¤§çŸ³æ–‘", price: 1200, min: 600 }
        ];

        const DIALOGUES = {
            start: ["å¸¥å“¥/ç¾å¥³ï¼Œé€™æ±è¥¿å¾ˆè®šæï¼Œç®—ä½ ä¾¿å®œå•¦ï¼", "é€™å¯æ˜¯æœ€å¾Œä¸€ä»¶äº†ï¼Œç®—ä½ å„ªæƒ åƒ¹ï¼", "ä»Šå¤©å‰›åˆ°çš„è²¨ï¼Œå¾ˆæ–°é®®å–”ï¼"],
            praise: ["å˜´å·´çœŸç”œï¼Œå¥½å•¦å°‘ç®—ä½ ä¸€é»ï¼", "å“å”·ï¼ŒçœŸæœƒèªªè©±ï¼Œé˜¿å§¨é–‹å¿ƒï¼", "å¥½å•¦å¥½å•¦ï¼Œçœ‹ä½ é€™éº¼æœ‰çœ¼å…‰ã€‚"],
            poor: ["ç¾åœ¨å¹´è¼•äººä¹Ÿä¸å®¹æ˜“...å¥½å•¦ã€‚", "å¥½å•¦å¥½å•¦ï¼Œåˆ¥è£å¯æ†äº†ã€‚", "çœŸçš„æ²’éŒ¢å–”ï¼Ÿé‚£å†ä¾¿å®œä¸€é»é»ã€‚"],
            flaw: ["é€™å“ªæ˜¯ç‘•ç–µï¼é€™æ˜¯ç‰¹è‰²ï¼(ä¸çˆ½)", "ä½ å¾ˆæŒ‘æï¼ä¸€åˆ†éŒ¢ä¸€åˆ†è²¨å•¦ï¼", "å«Œè²´ä¸è¦è²·ï¼(ç”Ÿæ°£)"],
            walk: ["å¥½å•¦å¥½å•¦ï¼å›ä¾†ï¼çµ¦ä½ ä¾¿å®œå•¦ï¼", "çœŸçš„æ˜¯...å¥½å•¦è³£ä½ å•¦ï¼", "ç®—äº†ç®—äº†ï¼Œäº¤å€‹æœ‹å‹ï¼"],
            angry: ["ä¸è³£äº†ï¼ä½ èµ°ï¼", "å“ªæœ‰äººé€™æ¨£æ®ºåƒ¹çš„ï¼æˆ‘ä¸è³£äº†ï¼", "å»å»å»ï¼Œåˆ¥æ“‹æˆ‘åšç”Ÿæ„ï¼"],
            lowball: ["å°‘å¹´ä»”ï¼Œé€™æ¨£æˆ‘æœƒè™§éŒ¢å•¦ï¼ä¸è¡Œï¼", "é€™å€‹åƒ¹æ ¼æˆ‘é€²è²¨éƒ½ä¸å¤ ï¼", "å¤ªä½äº†å•¦ï¼Œæ²’è¾¦æ³•ï¼"]
        };

        let state = {
            item: null,
            currentPrice: 0,
            patience: 100,
            history: []
        };

        const screens = {
            start: document.getElementById('screen-start'),
            play: document.getElementById('screen-play'),
            result: document.getElementById('screen-result')
        };

        const els = {
            price: document.getElementById('price-display'),
            patience: document.getElementById('patience-bar'),
            bubble: document.getElementById('auntie-bubble'),
            face: document.getElementById('auntie-face'),
            itemName: document.getElementById('item-name')
        };

        function showScreen(name) {
            Object.values(screens).forEach(s => s.classList.add('hidden'));
            screens[name].classList.remove('hidden');
        }

        function startGame() {
            const item = ITEMS[Math.floor(Math.random() * ITEMS.length)];
            state = {
                item: item,
                currentPrice: item.price,
                patience: 100,
                history: []
            };
            
            els.itemName.textContent = item.name;
            updateUI();
            setBubble(DIALOGUES.start);
            showScreen('play');
        }

        function updateUI() {
            els.price.textContent = Math.round(state.currentPrice);
            els.patience.style.width = state.patience + '%';
            
            // Color of patience bar
            if (state.patience < 30) els.patience.className = 'bg-red-500 h-2.5 rounded-full transition-all duration-300';
            else if (state.patience < 60) els.patience.className = 'bg-yellow-500 h-2.5 rounded-full transition-all duration-300';
            else els.patience.className = 'bg-blue-500 h-2.5 rounded-full transition-all duration-300';

            // Face expression
            if (state.patience < 30) els.face.textContent = 'ğŸ˜¡';
            else if (state.patience < 70) els.face.textContent = 'ğŸ˜’';
            else els.face.textContent = 'ğŸ‘µ';
        }

        function setBubble(arr) {
            els.bubble.textContent = arr[Math.floor(Math.random() * arr.length)];
        }

        function action(type) {
            let priceDrop = 0;
            let patienceDrop = 0;
            const min = state.item.min;

            // Logic
            if (type === 'praise') {
                priceDrop = state.currentPrice * 0.05;
                patienceDrop = -5; // Heal patience slightly
                setBubble(DIALOGUES.praise);
            } else if (type === 'poor') {
                priceDrop = state.currentPrice * 0.1;
                patienceDrop = 15;
                setBubble(DIALOGUES.poor);
            } else if (type === 'flaw') {
                priceDrop = state.currentPrice * 0.2;
                patienceDrop = 30;
                setBubble(DIALOGUES.flaw);
                // Shake effect
                els.face.classList.add('shake');
                setTimeout(()=>els.face.classList.remove('shake'), 500);
            } else if (type === 'walk') {
                if (state.patience > 50) {
                    priceDrop = state.currentPrice * 0.3;
                    patienceDrop = 20;
                    setBubble(DIALOGUES.walk);
                } else {
                    // Fail
                    endGame(false, "é˜¿å§¨çœŸçš„è®“ä½ èµ°äº†...");
                    return;
                }
            }

            // Apply changes
            state.currentPrice = Math.max(min * 1.1, state.currentPrice - priceDrop);
            state.patience = Math.min(100, Math.max(0, state.patience - patienceDrop));

            updateUI();

            // Check Game Over
            if (state.patience <= 0) {
                endGame(false, "é˜¿å§¨ç”Ÿæ°£äº†ï¼šã€Œä¸è³£äº†ï¼ä½ å»åˆ¥å®¶è²·ï¼ã€");
            }
        }

        function acceptDeal() {
            endGame(true, "æˆäº¤ï¼");
        }

        function endGame(success, msg) {
            showScreen('result');
            const resTitle = document.getElementById('result-title');
            const resDesc = document.getElementById('result-desc');
            const resEmoji = document.getElementById('result-emoji');

            if (success) {
                // Calculate score
                const discount = 1 - (state.currentPrice / state.item.price);
                let rank = "";
                if (discount < 0.2) rank = "æ®ºåƒ¹æ–°æ‰‹";
                else if (discount < 0.4) rank = "ç²¾æ‰“ç´°ç®—";
                else if (discount < 0.6) rank = "èœå¸‚å ´æ®ºæ‰‹";
                else rank = "æ®ºåƒ¹ä¹‹ç¥";

                resEmoji.textContent = "ğŸ‰";
                resTitle.textContent = "æˆäº¤ï¼";
                resTitle.className = "text-2xl font-bold mb-2 text-green-600";
                resDesc.innerHTML = `é˜¿å§¨ï¼šã€Œå¥½å•¦ï¼Œç®—ä½ æœƒèªªè©±ï¼ã€<br><span class="font-bold text-indigo-600 mt-2 block">è©•åƒ¹ï¼š${rank}</span>`;
                
                document.getElementById('final-price').textContent = Math.round(state.currentPrice);
                document.getElementById('original-price').textContent = state.item.price;
                document.getElementById('saved-amount').textContent = Math.round(state.item.price - state.currentPrice);

            } else {
                resEmoji.textContent = "ğŸ˜­";
                resTitle.textContent = "å¤±æ•—ï¼";
                resTitle.className = "text-2xl font-bold mb-2 text-red-600";
                resDesc.textContent = msg;
                
                document.getElementById('final-price').textContent = "---";
                document.getElementById('original-price').textContent = state.item.price;
                document.getElementById('saved-amount').textContent = "0";
            }
        }
    </script>
</body>
</html>
