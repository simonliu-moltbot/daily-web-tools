<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åšæ„›åº§ç”Ÿå­˜æˆ° | Priority Seat Survival</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background: #e5e5e5; }
        .glass-panel { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.5); border-radius: 1rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .mrt-bg { background-image: linear-gradient(to bottom right, #00874c 0%, #009e96 100%); position: relative; overflow: hidden; }
        .mrt-bg::before { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsMC4xKSIgc3Ryb2tlLXdpZHRoPSIxIj48cGF0aCBkPSJNMCAwTDIwIDIwTTAgMjBMMjAgMCIvPjwvc3ZnPg=='); opacity: 0.3; }
        .btn { transition: all 0.2s; active: scale-95; }
        .health-bar { transition: width 0.5s ease-out; }
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        .typing::after { content: '|'; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 mrt-bg text-gray-800">

    <div class="absolute top-4 left-4 z-10">
        <a href="../../index.html" class="inline-flex items-center px-4 py-2 bg-white/90 rounded-full shadow-md hover:bg-white transition-colors text-sm font-bold text-gray-700">
            ğŸ  å›é¦–é 
        </a>
    </div>

    <div class="w-full max-w-lg glass-panel p-6 relative">
        <!-- Start Screen -->
        <div id="screen-start" class="text-center space-y-6 py-8">
            <div class="text-6xl mb-4">ğŸš†ğŸ’ºğŸ˜°</div>
            <h1 class="text-3xl font-bold text-gray-800">åšæ„›åº§ç”Ÿå­˜æˆ°</h1>
            <p class="text-gray-600">Priority Seat Survival</p>
            <div class="bg-blue-50 p-4 rounded-lg text-left text-sm text-gray-700 border border-blue-100">
                <p class="font-bold mb-2">ğŸ“‹ éŠæˆ²èªªæ˜ï¼š</p>
                <p>ä½ å‰›ä¸‹ç­ï¼Œèº«å¿ƒä¿±ç–²ï¼Œå¥½ä¸å®¹æ˜“æ¶åˆ°äº†ä¸€å€‹æ·±è—è‰²çš„åšæ„›åº§ã€‚ä½†çœŸæ­£çš„æŒ‘æˆ°æ‰å‰›é–‹å§‹...</p>
                <ul class="list-disc list-inside mt-2 space-y-1">
                    <li>é¢å°å½¢å½¢è‰²è‰²çš„ä¹˜å®¢ï¼Œåšå‡ºä½ çš„é¸æ“‡ã€‚</li>
                    <li><span class="font-bold text-red-600">æ¥åº¦ (Shame)</span> æ­¸é›¶ -> ç¤¾æœƒæ€§æ­»äº¡ (Social Death)ã€‚</li>
                    <li><span class="font-bold text-green-600">é«”åŠ› (Energy)</span> æ­¸é›¶ -> éå‹æšˆå€’ (Fainted)ã€‚</li>
                    <li>æ’é <span class="font-bold text-blue-600">10 ç«™</span> å³å¯é †åˆ©å›å®¶ï¼</li>
                </ul>
            </div>
            <button onclick="startGame()" class="w-full py-4 bg-blue-600 hover:bg-blue-700 text-white text-xl font-bold rounded-xl shadow-lg transform transition hover:-translate-y-1 btn">
                é–‹å§‹æ­ä¹˜ (Start)
            </button>
            <p class="text-xs text-gray-400 mt-4">âš ï¸ ç´”å±¬å¨›æ¨‚ï¼Œè«‹ç™¼æ®å…¬å¾·å¿ƒï¼Œåšæ„›åº§äººäººå¯åï¼Œä½†è«‹å„ªå…ˆç¦®è®“æœ‰éœ€è¦çš„äººã€‚</p>
        </div>

        <!-- Game Screen -->
        <div id="screen-game" class="hidden space-y-6">
            <!-- Stats Header -->
            <div class="flex justify-between items-center bg-gray-100 rounded-lg p-3 text-sm font-bold">
                <div class="flex items-center space-x-2">
                    <span>ğŸš‰ ç«™é»:</span>
                    <span id="stat-station" class="text-blue-600 text-lg">1/10</span>
                </div>
                <div class="flex space-x-4">
                    <div class="flex flex-col items-end">
                        <div class="flex items-center space-x-1 text-xs text-gray-500">
                            <span>â¤ï¸ é«”åŠ›</span>
                        </div>
                        <div class="w-20 h-2 bg-gray-300 rounded-full overflow-hidden">
                            <div id="bar-hp" class="h-full bg-red-500 health-bar" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="flex flex-col items-end">
                        <div class="flex items-center space-x-1 text-xs text-gray-500">
                            <span>ğŸ›¡ï¸ æ¥åº¦</span>
                        </div>
                        <div class="w-20 h-2 bg-gray-300 rounded-full overflow-hidden">
                            <div id="bar-shame" class="h-full bg-indigo-500 health-bar" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scene Area -->
            <div class="bg-white rounded-xl shadow-inner p-6 text-center border border-gray-200 min-h-[240px] flex flex-col justify-center items-center">
                <div id="enemy-avatar" class="text-6xl mb-4 animate-bounce">ğŸ‘µ</div>
                <h2 id="enemy-name" class="text-xl font-bold text-gray-800 mb-2">å¸‚å ´é˜¿å¬¤</h2>
                <p id="enemy-desc" class="text-gray-600 text-sm italic">"å°‘å¹´ä»”ï¼Œçœ‹ä½ æ°£è‰²ä¸éŒ¯å˜›..."</p>
                <div id="result-message" class="hidden mt-4 p-3 bg-yellow-50 text-yellow-800 rounded-lg text-sm font-bold border border-yellow-200 w-full animate-fade-in"></div>
            </div>

            <!-- Actions -->
            <div id="action-area" class="grid grid-cols-2 gap-3">
                <button onclick="handleAction('give')" class="btn py-3 bg-green-100 hover:bg-green-200 text-green-800 rounded-lg font-bold border border-green-200 flex flex-col items-center">
                    <span class="text-2xl mb-1">ğŸ’º</span>
                    <span>è®“åº§ (Give)</span>
                </button>
                <button onclick="handleAction('sleep')" class="btn py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg font-bold border border-gray-200 flex flex-col items-center">
                    <span class="text-2xl mb-1">ğŸ˜´</span>
                    <span>è£ç¡ (Sleep)</span>
                </button>
                <button onclick="handleAction('phone')" class="btn py-3 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg font-bold border border-blue-200 flex flex-col items-center">
                    <span class="text-2xl mb-1">ğŸ“±</span>
                    <span>æ»‘æ‰‹æ©Ÿ (Phone)</span>
                </button>
                <button onclick="handleAction('stare')" class="btn py-3 bg-red-100 hover:bg-red-200 text-red-800 rounded-lg font-bold border border-red-200 flex flex-col items-center">
                    <span class="text-2xl mb-1">ğŸ‘€</span>
                    <span>çªå›å» (Stare)</span>
                </button>
            </div>

            <button id="next-btn" onclick="nextRound()" class="hidden w-full py-4 bg-gray-800 hover:bg-gray-900 text-white font-bold rounded-xl shadow-lg btn">
                ä¸‹ä¸€ç«™ (Next Station) ğŸ‘‰
            </button>
        </div>

        <!-- End Screen -->
        <div id="screen-end" class="hidden text-center space-y-6 py-8">
            <div id="end-icon" class="text-6xl mb-4">ğŸ’€</div>
            <h2 id="end-title" class="text-2xl font-bold text-gray-800">ç¤¾æœƒæ€§æ­»äº¡</h2>
            <p id="end-reason" class="text-gray-600 px-4">ä½ è¢«æ‹æˆå½±ç‰‡ä¸Šå‚³åˆ° Threadsï¼Œæ¨™é¡Œæ˜¯ã€Œç¾åœ¨å¹´è¼•äººçœŸæ²’ç¦®è²Œã€ï¼Œç²å¾— 2 è¬å€‹è®šã€‚</p>
            
            <div class="bg-gray-50 p-4 rounded-lg mx-4 text-left border border-gray-200">
                <p class="text-sm text-gray-500 mb-1">æœ€çµ‚æˆç¸¾</p>
                <div class="flex justify-between items-center mb-2">
                    <span class="font-bold text-gray-700">æ’éç«™æ•¸:</span>
                    <span id="end-score" class="font-mono text-xl text-blue-600">3/10</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="font-bold text-gray-700">ç´¯ç©é™°å¾·:</span>
                    <span id="end-karma" class="font-mono text-xl text-yellow-600">50</span>
                </div>
            </div>

            <button onclick="location.reload()" class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-md btn">
                å†ä¾†ä¸€æ¬¡ (Try Again)
            </button>
        </div>

        <div class="text-center mt-6">
            <p class="text-[10px] text-gray-400">Created by AI Agent on 2026-02-07</p>
        </div>
    </div>

    <script>
        // Game State
        let state = {
            hp: 100,      // Energy
            shame: 100,   // Shame Resistance
            station: 1,   // Current Station (1-10)
            karma: 0,     // Karma
            currentEnemy: null
        };

        const MAX_STATIONS = 10;

        // Enemies Database
        const ENEMIES = [
            { id: 'student', name: 'å‰›æ‰“å®Œçƒçš„é«˜ä¸­ç”Ÿ', icon: 'ğŸ€', desc: 'æ»¿èº«å¤§æ±—ï¼Œçœ‹èµ·ä¾†å¾ˆç´¯ï¼Œä½†å…¶å¯¦é«”åŠ›æ¯”ä½ å¥½ã€‚', type: 'easy', hpDmg: 5, shameDmg: 10 },
            { id: 'kid', name: 'ä¸å—æ§çš„å°å±å­©', icon: 'ğŸ‘¶', desc: 'åœ¨æ¤…å­ä¸Šè·³ä¾†è·³å»ï¼Œåª½åª½åœ¨æ»‘æ‰‹æ©Ÿä¸ç®¡ã€‚', type: 'annoying', hpDmg: 15, shameDmg: 5 },
            { id: 'hiker', name: 'ç™»å±±è£å‚™å¤§åª½', icon: 'ğŸ’', desc: 'ç™»å±±æ–ä¸€ç›´æˆ³åˆ°ä½ çš„è…³ï¼Œå¤§è²èŠå¤©çš„å¼·è€…ã€‚', type: 'medium', hpDmg: 10, shameDmg: 20 },
            { id: 'pregnant', name: 'ç–‘ä¼¼å­•å©¦çš„å°å§', icon: 'ğŸ¤°', desc: 'ç©¿è‘—å¯¬é¬†æ´‹è£ï¼Œæ‰‹æ‘¸è‚šå­...ä½†ä¹Ÿå¯èƒ½æ˜¯åƒå¤ªé£½ï¼Ÿ', type: 'tricky', hpDmg: 5, shameDmg: 50 },
            { id: 'crutch', name: 'å—å‚·çš„å¹´è¼•äºº', icon: 'ğŸ©¼', desc: 'è…³ä¸Šæ‰“è‘—çŸ³è†ï¼Œçœ¼ç¥æ¸´æœ›åœ°çœ‹è‘—åº§ä½ã€‚', type: 'hard', hpDmg: 5, shameDmg: 40 },
            { id: 'justice', name: 'æ­£ç¾©é­”äººé˜¿ä¼¯', icon: 'ğŸ‘´', desc: 'æ‹¿è‘—æ‰‹æ©ŸéŒ„å½±ï¼Œã€Œç¾åœ¨å¹´è¼•äººéƒ½è£ç¡å•¦ï¼ã€', type: 'boss', hpDmg: 20, shameDmg: 60 },
            { id: 'vegetable', name: 'èœç±ƒè»Šé˜¿å¬¤', icon: 'ğŸ¥¬', desc: 'æ¨è‘—å·¨å¤§çš„èœç±ƒè»Šï¼Œç›´æ¥æ’ä½ çš„è†è“‹ã€‚', type: 'medium', hpDmg: 25, shameDmg: 15 },
            { id: 'suit', name: 'ç–²æ†Šä¸Šç­æ—', icon: 'ğŸ’¼', desc: 'çœ‹èµ·ä¾†å¿«éå‹æ­»äº†ï¼Œè·Ÿä½ ä¸€æ¨£å¯æ†ã€‚', type: 'mirror', hpDmg: 5, shameDmg: 5 }
        ];

        // Start Game
        function startGame() {
            document.getElementById('screen-start').classList.add('hidden');
            document.getElementById('screen-game').classList.remove('hidden');
            nextRound();
        }

        // Next Round
        function nextRound() {
            if (state.station > MAX_STATIONS) {
                endGame('win');
                return;
            }

            // Reset UI
            document.getElementById('action-area').classList.remove('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('result-message').classList.add('hidden');
            document.getElementById('result-message').innerHTML = '';

            // Update Stats UI
            updateUI();

            // Pick Random Enemy
            // Higher probability of harder enemies as stations increase
            let pool = ENEMIES;
            if (state.station < 3) pool = ENEMIES.filter(e => ['easy', 'annoying', 'mirror'].includes(e.type));
            else if (state.station > 7) pool = ENEMIES; // All included

            const enemy = pool[Math.floor(Math.random() * pool.length)];
            state.currentEnemy = enemy;

            // Render Enemy
            document.getElementById('enemy-avatar').innerText = enemy.icon;
            document.getElementById('enemy-name').innerText = enemy.name;
            document.getElementById('enemy-desc').innerText = enemy.desc;
        }

        // Action Handler
        function handleAction(action) {
            const enemy = state.currentEnemy;
            let msg = '';
            let msgColor = 'text-gray-800';
            let hpChange = 0;
            let shameChange = 0;
            let karmaChange = 0;

            // Calculate Outcome
            switch(action) {
                case 'give':
                    if (enemy.id === 'justice') {
                        msg = 'é˜¿ä¼¯èªªï¼šã€Œç®—ä½ è­˜ç›¸ï¼ã€ä½†ä»–é‚„æ˜¯æŠŠå½±ç‰‡ä¸Šå‚³äº†ã€‚';
                        shameChange = -10;
                        karmaChange = 5;
                    } else if (enemy.id === 'pregnant' && Math.random() > 0.5) {
                        msg = 'å°·å°¬äº†ï¼å¥¹èªªï¼šã€Œæˆ‘åªæ˜¯å‰›åƒé£½...ã€å…¨è»Šéƒ½åœ¨çœ‹ä½ ã€‚';
                        shameChange = -30;
                    } else {
                        msg = 'ä½ è®“å‡ºäº†åº§ä½ã€‚å°æ–¹é»é ­è‡´è¬ï¼Œä½ æ„Ÿè¦ºå¿ƒéˆå¾—åˆ°äº†æ˜‡è¯ï¼Œä½†è…¿æ›´ç— äº†ã€‚';
                        hpChange = -15; // Standing is tiring
                        karmaChange = 20;
                        shameChange = 5; // Feel good
                    }
                    break;
                case 'sleep':
                    if (enemy.id === 'justice') {
                        msg = 'é˜¿ä¼¯å¤§å–Šï¼šã€Œåˆ¥è£äº†ï¼æˆ‘éƒ½éŒ„ä¸‹ä¾†äº†ï¼ã€ä½ çš„è£ç¡æŠ€å·§è¢«è­˜ç ´ã€‚';
                        shameChange = -40;
                    } else if (enemy.id === 'kid') {
                        msg = 'å°å­©åœ¨ä½ çš„è€³é‚Šå°–å«ï¼Œæ ¹æœ¬ç¡ä¸è‘—ã€‚';
                        hpChange = -10;
                        shameChange = -5;
                    } else {
                        msg = 'ä½ æˆåŠŸé€²å…¥äº†å¤¢é„‰ï¼ˆæˆ–å‡è£é€²å…¥ï¼‰ã€‚ç¾å¯¦ä¸–ç•Œçš„ç´›æ“¾èˆ‡ä½ ç„¡é—œã€‚';
                        hpChange = 5; // Restored some energy
                        shameChange = -5; // A bit guilty
                    }
                    break;
                case 'phone':
                    if (enemy.type === 'hard' || enemy.type === 'boss') {
                        msg = 'ä½ å°ˆæ³¨æ–¼æ‰‹æ©Ÿï¼Œè©¦åœ–ç„¡è¦–æ„Ÿå—åˆ°å¼·çƒˆçš„è¦–ç·šå£“åŠ›ã€‚';
                        shameChange = -20;
                    } else {
                        msg = 'ä½ æ»‘è‘— Threadsï¼Œæ™‚é–“éå¾—å¾ˆå¿«ã€‚';
                        shameChange = -5;
                    }
                    break;
                case 'stare':
                    if (enemy.id === 'justice') {
                        msg = 'ä½ èˆ‡æ­£ç¾©é­”äººäº’çªã€‚å ´é¢ä¸€åº¦ååˆ†ç«çˆ†ã€‚';
                        hpChange = -10;
                        shameChange = -10;
                    } else if (enemy.id === 'student') {
                        msg = 'é«˜ä¸­ç”Ÿè¢«ä½ çš„æ®ºæ°£åš‡åˆ°äº†ï¼Œå¾€æ—é‚Šç¸®äº†ä¸€é»ã€‚';
                        shameChange = 10; // Dominance asserted
                    } else {
                        msg = 'ä½ è©¦åœ–ç”¨çœ¼ç¥é€¼é€€å°æ–¹ï¼Œä½†æ•ˆæœä¸€èˆ¬ã€‚';
                        shameChange = -10;
                    }
                    break;
            }

            // Apply changes
            state.hp += hpChange;
            state.shame += shameChange;
            state.karma += karmaChange;
            
            // Clamp stats
            state.hp = Math.min(100, Math.max(0, state.hp));
            state.shame = Math.min(100, Math.max(0, state.shame));

            // Show Result
            const resultDiv = document.getElementById('result-message');
            resultDiv.innerHTML = `${msg}<br><span class="text-xs mt-1 block opacity-75">é«”åŠ› ${hpChange>0?'+':''}${hpChange} | æ¥åº¦ ${shameChange>0?'+':''}${shameChange} | é™°å¾· ${karmaChange>0?'+':''}${karmaChange}</span>`;
            resultDiv.classList.remove('hidden');
            
            document.getElementById('action-area').classList.add('hidden');
            document.getElementById('next-btn').classList.remove('hidden');

            updateUI();

            // Check Game Over
            if (state.hp <= 0) {
                setTimeout(() => endGame('faint'), 1000);
            } else if (state.shame <= 0) {
                setTimeout(() => endGame('shame'), 1000);
            } else {
                state.station++; // Ready for next station
            }
        }

        function updateUI() {
            document.getElementById('stat-station').innerText = `${state.station}/${MAX_STATIONS}`;
            document.getElementById('bar-hp').style.width = `${state.hp}%`;
            document.getElementById('bar-shame').style.width = `${state.shame}%`;

            // Color changes
            document.getElementById('bar-hp').className = `h-full health-bar ${state.hp < 30 ? 'bg-red-600' : 'bg-green-500'}`;
            document.getElementById('bar-shame').className = `h-full health-bar ${state.shame < 30 ? 'bg-red-600' : 'bg-indigo-500'}`;
        }

        function endGame(reason) {
            document.getElementById('screen-game').classList.add('hidden');
            document.getElementById('screen-end').classList.remove('hidden');
            
            const title = document.getElementById('end-title');
            const desc = document.getElementById('end-reason');
            const icon = document.getElementById('end-icon');

            if (reason === 'win') {
                icon.innerText = 'ğŸ ';
                title.innerText = 'é †åˆ©åˆ°å®¶ï¼';
                title.className = 'text-2xl font-bold text-green-600';
                desc.innerText = `ä½ æˆåŠŸå®ˆè­·äº†ï¼ˆæˆ–è®“å‡ºäº†ï¼‰ä½ çš„åº§ä½ï¼Œå¹³å®‰æŠµé”ç›®çš„åœ°ã€‚é€™æ˜¯ä¸€å ´å‰å¤§çš„å‹åˆ©ï¼`;
            } else if (reason === 'faint') {
                icon.innerText = 'ğŸš‘';
                title.innerText = 'é«”åŠ›é€æ”¯';
                title.className = 'text-2xl font-bold text-red-600';
                desc.innerText = 'ä½ å¯¦åœ¨å¤ªç´¯äº†ï¼Œç›´æ¥æšˆå€’åœ¨è»Šå»‚è£¡ã€‚é†’ä¾†æ™‚å·²ç¶“åœ¨é†«é™¢ã€‚';
            } else if (reason === 'shame') {
                icon.innerText = 'âš°ï¸';
                title.innerText = 'ç¤¾æœƒæ€§æ­»äº¡';
                title.className = 'text-2xl font-bold text-gray-800';
                desc.innerText = 'ä½ çš„è¡Œç‚ºè¢«POä¸Šç¶²å…¬å¯©ï¼Œã€Œåšæ„›åº§ä¹‹äº‚ã€çš„ä¸»è§’å°±æ˜¯ä½ ã€‚';
            }

            document.getElementById('end-score').innerText = `${Math.min(state.station, 10)}/10`;
            document.getElementById('end-karma').innerText = state.karma;
        }
    </script>
</body>
</html>
