<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¦ªæˆšç¨±è¬‚è¨ˆç®—æ©Ÿ (Relatives Calculator) - Daily Taiwan Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .btn-calc {
            transition: all 0.1s;
        }
        .btn-calc:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="bg-orange-50 min-h-screen flex flex-col items-center p-4">

    <!-- Header -->
    <div class="w-full max-w-md flex justify-between items-center mb-6">
        <a href="../../index.html" class="text-orange-800 hover:text-orange-900 font-medium flex items-center gap-1 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
            </svg>
            å›é¦–é 
        </a>
    </div>

    <!-- Main Calculator -->
    <div class="bg-white rounded-3xl shadow-2xl overflow-hidden w-full max-w-md border border-orange-100">
        
        <!-- Display Screen -->
        <div class="bg-gray-900 p-6 text-right relative">
            <div class="text-gray-400 text-sm mb-1 h-6" id="chainText">æˆ‘</div>
            <div class="text-white text-4xl font-bold truncate h-12" id="resultText">è‡ªå·±</div>
            <div class="absolute top-4 left-4 text-orange-400 opacity-20 text-6xl select-none pointer-events-none">
                ğŸ‘ª
            </div>
        </div>

        <!-- Controls -->
        <div class="p-4 grid grid-cols-4 gap-3 bg-gray-50">
            
            <button onclick="handleBtn('f')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">çˆ¶</button>
            <button onclick="handleBtn('m')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">æ¯</button>
            <button onclick="handleAction('back')" class="btn-calc bg-gray-200 p-4 rounded-xl shadow-sm text-gray-600 font-bold hover:bg-gray-300">â†</button>
            <button onclick="handleAction('reset')" class="btn-calc bg-red-100 p-4 rounded-xl shadow-sm text-red-600 font-bold hover:bg-red-200">C</button>

            <button onclick="handleBtn('h')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">å¤«</button>
            <button onclick="handleBtn('w')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">å¦»</button>
            <button onclick="handleBtn('ob')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">å…„</button>
            <button onclick="handleBtn('yb')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">å¼Ÿ</button>

            <button onclick="handleBtn('s')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">å­</button>
            <button onclick="handleBtn('d')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">å¥³</button>
            <button onclick="handleBtn('os')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">å§</button>
            <button onclick="handleBtn('ys')" class="btn-calc bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-gray-700 font-bold hover:bg-orange-50 hover:border-orange-200">å¦¹</button>

        </div>
        
        <div class="bg-orange-50 p-4 text-center text-xs text-orange-400">
            æŒ‰éˆ•é †åºï¼šå…ˆæŒ‰ã€Œçˆ¶ã€å†æŒ‰ã€Œå…„ã€= çˆ¸çˆ¸çš„å“¥å“¥ (ä¼¯çˆ¶)
        </div>
    </div>

    <!-- Quick Common Guide -->
    <div class="mt-8 max-w-md w-full">
        <h3 class="text-orange-900 font-bold mb-3 flex items-center gap-2">
            <span>ğŸ”¥</span> å¸¸è¦‹æŸ¥è©¢
        </h3>
        <div class="grid grid-cols-2 gap-3">
            <button onclick="setChain(['f','ob'])" class="bg-white p-3 rounded-lg shadow-sm text-sm text-left hover:shadow-md transition">
                <span class="text-gray-500 block text-xs">çˆ¸çˆ¸çš„å“¥å“¥</span>
                <span class="font-bold text-gray-800">ä¼¯çˆ¶</span>
            </button>
            <button onclick="setChain(['m','ob'])" class="bg-white p-3 rounded-lg shadow-sm text-sm text-left hover:shadow-md transition">
                <span class="text-gray-500 block text-xs">åª½åª½çš„å…„å¼Ÿ</span>
                <span class="font-bold text-gray-800">èˆ…èˆ…</span>
            </button>
            <button onclick="setChain(['f','ys'])" class="bg-white p-3 rounded-lg shadow-sm text-sm text-left hover:shadow-md transition">
                <span class="text-gray-500 block text-xs">çˆ¸çˆ¸çš„å§å¦¹</span>
                <span class="font-bold text-gray-800">å§‘å§‘</span>
            </button>
            <button onclick="setChain(['m','ys'])" class="bg-white p-3 rounded-lg shadow-sm text-sm text-left hover:shadow-md transition">
                <span class="text-gray-500 block text-xs">åª½åª½çš„å§å¦¹</span>
                <span class="font-bold text-gray-800">é˜¿å§¨</span>
            </button>
        </div>
    </div>

    <footer class="mt-8 text-center text-orange-300 text-xs pb-4">
        Created by AI Agent on <script>document.write(new Date().toISOString().split('T')[0])</script>
    </footer>

    <script>
        // Database of titles
        // Keys: comma separated sequence
        // f=father, m=mother, h=husband, w=wife, s=son, d=daughter
        // ob=older bro, yb=younger bro, os=older sis, ys=younger sis
        
        const TITLES = {
            // Level 1
            'f': 'çˆ¶è¦ª (çˆ¸çˆ¸)',
            'm': 'æ¯è¦ª (åª½åª½)',
            'h': 'ä¸ˆå¤« (è€å…¬)',
            'w': 'å¦»å­ (è€å©†)',
            'ob': 'å“¥å“¥ (å…„)',
            'yb': 'å¼Ÿå¼Ÿ (å¼Ÿ)',
            'os': 'å§å§ (å§)',
            'ys': 'å¦¹å¦¹ (å¦¹)',
            's': 'å…’å­',
            'd': 'å¥³å…’',

            // Level 2 (Paternal)
            'f,f': 'ç¥–çˆ¶ (çˆºçˆº)',
            'f,m': 'ç¥–æ¯ (å¥¶å¥¶)',
            'f,ob': 'ä¼¯çˆ¶ (é˜¿ä¼¯)',
            'f,yb': 'å”çˆ¶ (å”å”)',
            'f,os': 'å§‘æ¯ (å§‘å§‘)',
            'f,ys': 'å§‘æ¯ (å§‘å§‘)',
            'f,s': 'å…„å¼Ÿ', // Context dependent (Me)
            'f,d': 'å§å¦¹', // Context dependent

            // Level 2 (Maternal)
            'm,f': 'å¤–ç¥–çˆ¶ (å¤–å…¬)',
            'm,m': 'å¤–ç¥–æ¯ (å¤–å©†)',
            'm,ob': 'èˆ…çˆ¶ (èˆ…èˆ…)',
            'm,yb': 'èˆ…çˆ¶ (èˆ…èˆ…)',
            'm,os': 'å§¨æ¯ (é˜¿å§¨)',
            'm,ys': 'å§¨æ¯ (é˜¿å§¨)',
            'm,s': 'å…„å¼Ÿ',
            'm,d': 'å§å¦¹',

            // Level 2 (Spousal)
            'h,f': 'å…¬å…¬',
            'h,m': 'å©†å©†',
            'h,ob': 'å¤§ä¼¯',
            'h,yb': 'å°å”',
            'h,os': 'å¤§å§‘',
            'h,ys': 'å°å§‘',

            'w,f': 'å²³çˆ¶',
            'w,m': 'å²³æ¯',
            'w,ob': 'å¤§èˆ…å­',
            'w,yb': 'å°èˆ…å­',
            'w,os': 'å¤§å§¨å­',
            'w,ys': 'å°å§¨å­',

            // Level 2 (Sibling's Spouses)
            'ob,w': 'å«‚å«‚',
            'yb,w': 'å¼Ÿåª³',
            'os,h': 'å§å¤«',
            'ys,h': 'å¦¹å¤«',

            // Level 3 (Uncles/Aunts Spouses)
            'f,ob,w': 'ä¼¯æ¯',
            'f,yb,w': 'å¬¸å¬¸',
            'f,os,h': 'å§‘ä¸ˆ',
            'f,ys,h': 'å§‘ä¸ˆ',
            
            'm,ob,w': 'èˆ…åª½',
            'm,yb,w': 'èˆ…åª½',
            'm,os,h': 'å§¨ä¸ˆ',
            'm,ys,h': 'å§¨ä¸ˆ',

            // Level 3 (Grandparents)
            'f,f,f': 'æ›¾ç¥–çˆ¶',
            'f,f,m': 'æ›¾ç¥–æ¯',
            'm,m,m': 'æ›¾å¤–ç¥–æ¯', // etc

            // Children of Siblings
            'ob,s': 'å§ªå­',
            'ob,d': 'å§ªå¥³',
            'yb,s': 'å§ªå­',
            'yb,d': 'å§ªå¥³',
            'os,s': 'å¤–ç”¥',
            'os,d': 'å¤–ç”¥å¥³',
            'ys,s': 'å¤–ç”¥',
            'ys,d': 'å¤–ç”¥å¥³',
            
            // Cousins (Paternal) - Simplified "Tang"
            'f,ob,s': 'å ‚å…„å¼Ÿ',
            'f,ob,d': 'å ‚å§å¦¹',
            'f,yb,s': 'å ‚å…„å¼Ÿ',
            'f,yb,d': 'å ‚å§å¦¹',
            'f,os,s': 'è¡¨å…„å¼Ÿ', // Gu biao
            'f,os,d': 'è¡¨å§å¦¹',

            // Cousins (Maternal) - Simplified "Biao"
            'm,ob,s': 'è¡¨å…„å¼Ÿ',
            'm,ob,d': 'è¡¨å§å¦¹',
            'm,os,s': 'è¡¨å…„å¼Ÿ',
            'm,os,d': 'è¡¨å§å¦¹'
        };

        const LABELS = {
            'f': 'çˆ¶è¦ª', 'm': 'æ¯è¦ª', 'h': 'ä¸ˆå¤«', 'w': 'å¦»å­',
            'ob': 'å“¥å“¥', 'yb': 'å¼Ÿå¼Ÿ', 'os': 'å§å§', 'ys': 'å¦¹å¦¹',
            's': 'å…’å­', 'd': 'å¥³å…’'
        };

        let currentChain = [];

        function updateDisplay() {
            const chainDiv = document.getElementById('chainText');
            const resultDiv = document.getElementById('resultText');

            if (currentChain.length === 0) {
                chainDiv.innerText = "æˆ‘";
                resultDiv.innerText = "è‡ªå·±";
                return;
            }

            // Build chain text e.g. "æˆ‘çš„ çˆ¶è¦ª çš„ å“¥å“¥"
            const text = "æˆ‘çš„ " + currentChain.map(k => LABELS[k]).join(" çš„ ");
            chainDiv.innerText = text;

            // Lookup
            const key = currentChain.join(',');
            if (TITLES[key]) {
                resultDiv.innerText = TITLES[key];
                resultDiv.classList.remove('text-gray-400');
                resultDiv.classList.add('text-white');
            } else {
                resultDiv.innerText = "??? (å¤ªé äº†)";
                resultDiv.classList.remove('text-white');
                resultDiv.classList.add('text-gray-400');
            }
        }

        function handleBtn(key) {
            if (currentChain.length >= 4) {
                // Limit depth
                alert("å¤ªè¤‡é›œäº†ï¼Œè«‹æŸ¥æ—è­œï¼");
                return;
            }
            currentChain.push(key);
            updateDisplay();
        }

        function handleAction(action) {
            if (action === 'reset') {
                currentChain = [];
            } else if (action === 'back') {
                currentChain.pop();
            }
            updateDisplay();
        }

        function setChain(chain) {
            currentChain = chain;
            updateDisplay();
        }
    </script>
</body>
</html>
