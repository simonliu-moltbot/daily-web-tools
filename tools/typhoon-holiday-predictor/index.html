<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¢±é¢¨å‡é æ¸¬å™¨ | Daily Taiwan Web Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; }
        .slider-label { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">
    <div class="max-w-2xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
        <!-- Header -->
        <div class="bg-blue-600 p-6 text-white relative">
            <a href="../../index.html" class="absolute top-4 left-4 text-blue-100 hover:text-white transition-colors">ğŸ  å›é¦–é </a>
            <h1 class="text-2xl md:text-3xl font-bold text-center mt-6">ğŸŒ€ é¢±é¢¨å‡é æ¸¬å™¨</h1>
            <p class="text-center text-blue-100 mt-2 text-sm">è¼¸å…¥é¢±é¢¨æ•¸æ“šï¼Œé æ¸¬å¸‚é•·å®£å¸ƒæ”¾å‡çš„æ©Ÿç‡</p>
        </div>

        <div class="p-6 space-y-8">
            <!-- Form -->
            <div class="space-y-6">
                <!-- Wind Speed -->
                <div>
                    <div class="slider-label">
                        <label class="font-medium text-gray-700">ğŸ’¨ é¢¨åŠ›ç­‰ç´š (Bf)</label>
                        <span id="wind-val" class="text-blue-600 font-bold">7</span>
                    </div>
                    <input type="range" id="wind" min="0" max="17" value="7" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                    <p class="text-xs text-gray-500 mt-1">æ³•è¦åŸºæº–ï¼šå¹³å‡é¢¨åŠ› 7 ç´šä»¥ä¸Šæˆ–é™£é¢¨ 10 ç´šä»¥ä¸Šã€‚</p>
                </div>

                <!-- Rainfall -->
                <div>
                    <div class="slider-label">
                        <label class="font-medium text-gray-700">ğŸŒ§ï¸ 24h ç´¯ç©é›¨é‡ (mm)</label>
                        <span id="rain-val" class="text-blue-600 font-bold">200</span>
                    </div>
                    <input type="range" id="rain" min="0" max="1000" step="50" value="200" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                    <p class="text-xs text-gray-500 mt-1">å±±å€èˆ‡å¹³åœ°åŸºæº–ä¸åŒï¼Œé€šå¸¸ 350mm ä»¥ä¸Šæ©Ÿç‡å¤§å¢ã€‚</p>
                </div>

                <!-- Mayor's Pressure / K-point -->
                <div>
                    <div class="slider-label">
                        <label class="font-medium text-gray-700">ğŸ—³ï¸ å¸‚é•·æ°‘èª¿/é¸èˆ‰å£“åŠ›</label>
                        <span id="pressure-val" class="text-blue-600 font-bold">æ™®é€š</span>
                    </div>
                    <input type="range" id="pressure" min="0" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                    <p class="text-xs text-gray-500 mt-1">é¸æƒ…å‘Šæ€¥æˆ–å‰›ä¸Šä»»æ™‚ï¼Œæ”¾å‡æ©Ÿç‡æœ‰åŠ æˆæ•ˆæœã€‚</p>
                </div>

                <!-- Day of Week -->
                <div>
                    <label class="font-medium text-gray-700 block mb-2">ğŸ“… æ˜ŸæœŸå¹¾ï¼Ÿ</label>
                    <select id="weekday" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                        <option value="1">é€±ä¸€ (æ†‚é¬±æ•‘æ˜Ÿ)</option>
                        <option value="2">é€±äºŒ</option>
                        <option value="3">é€±ä¸‰</option>
                        <option value="4">é€±å››</option>
                        <option value="5">é€±äº” (é€£å‡èª˜æƒ‘)</option>
                        <option value="6">é€±å…­ (åŠ ç­ç‹—çš„å°ç¢ºå¹¸)</option>
                        <option value="0">é€±æ—¥ (æ”¾äº†è·Ÿæ²’æ”¾ä¸€æ¨£)</option>
                    </select>
                </div>
            </div>

            <!-- Predict Button -->
            <button id="predict-btn" class="w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all transform active:scale-95 shadow-lg">
                é–‹å§‹è§€æ¸¬å¤©æ°£ç‹€æ³
            </button>

            <!-- Result Section -->
            <div id="result-area" class="hidden animate-fade-in">
                <div class="border-t-2 border-dashed border-gray-200 pt-8 text-center">
                    <div class="text-gray-500 text-sm mb-1 uppercase tracking-widest">é ä¼°æ”¾å‡æ©Ÿç‡</div>
                    <div id="prob-display" class="text-6xl font-black text-blue-600 mb-4">0%</div>
                    <div id="status-badge" class="inline-block px-4 py-1 rounded-full text-sm font-bold bg-gray-100 text-gray-600 mb-4">
                        ç­‰å¾…æ•¸æ“šè¼¸å…¥
                    </div>
                    <div id="comment" class="text-gray-700 italic bg-gray-50 p-4 rounded-lg border border-gray-100">
                        ã€Œå¸‚é•·æ­£åœ¨çœ‹æ°£è±¡é›²åœ–...ã€
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="p-6 bg-gray-50 text-center text-xs text-gray-400">
            æœ¬å·¥å…·ç´”å±¬å¨›æ¨‚èˆ‡æ¨¡æ“¬ï¼Œå¯¦éš›æ”¾å‡è¨Šæ¯è«‹ä»¥è¡Œæ”¿é™¢äººäº‹è¡Œæ”¿ç¸½è™•ç‚ºæº–ã€‚<br>
            Created by AI Agent on 2025-05-13
        </footer>
    </div>

    <script>
        const windInput = document.getElementById('wind');
        const rainInput = document.getElementById('rain');
        const pressureInput = document.getElementById('pressure');
        const weekdayInput = document.getElementById('weekday');
        const predictBtn = document.getElementById('predict-btn');
        const resultArea = document.getElementById('result-area');
        const probDisplay = document.getElementById('prob-display');
        const statusBadge = document.getElementById('status-badge');
        const commentDisplay = document.getElementById('comment');

        // Update values
        windInput.oninput = () => document.getElementById('wind-val').innerText = windInput.value;
        rainInput.oninput = () => document.getElementById('rain-val').innerText = rainInput.value;
        pressureInput.oninput = () => {
            const v = pressureInput.value;
            let text = 'æ™®é€š';
            if (v < 30) text = 'ç©©å®š (ç„¡æ¬²å‰‡å‰›)';
            else if (v > 70) text = 'å‘Šæ€¥ (åŠ å€å¥‰é‚„)';
            document.getElementById('pressure-val').innerText = text;
        };

        predictBtn.onclick = () => {
            predictBtn.disabled = true;
            predictBtn.innerText = 'æ­£åœ¨æ’¥æ‰“é›»è©±çµ¦æ°£è±¡å±€...';
            
            setTimeout(() => {
                calculate();
                predictBtn.disabled = false;
                predictBtn.innerText = 'é‡æ–°è§€æ¸¬å¤©æ°£ç‹€æ³';
                resultArea.classList.remove('hidden');
                resultArea.scrollIntoView({ behavior: 'smooth' });
            }, 800);
        };

        function calculate() {
            const wind = parseInt(windInput.value);
            const rain = parseInt(rainInput.value);
            const pressure = parseInt(pressureInput.value);
            const weekday = parseInt(weekdayInput.value);

            let prob = 0;

            // Base probability from weather
            if (wind >= 7) prob += (wind - 6) * 10;
            if (wind >= 10) prob += 20;
            
            prob += (rain / 1000) * 50;

            // Pressure bonus
            prob += (pressure / 100) * 20;

            // Weekday modifiers
            if (weekday === 1) prob += 5; // Monday bonus
            if (weekday === 5) prob += 10; // Friday bonus
            if (weekday === 0 || weekday === 6) prob -= 15; // Weekend penalty

            // Cap
            prob = Math.min(Math.max(Math.round(prob), 0), 100);

            // Display
            probDisplay.innerText = prob + '%';

            // Comment and Badge
            let status = '';
            let comment = '';
            let badgeClass = '';

            if (prob < 20) {
                status = 'æ´—æ´—ç¡å§';
                comment = 'ã€Œä¹–ä¹–å»ä¸Šç­å§ï¼Œåˆ¥æƒ³äº†ã€‚å¸‚é•·èªªä»–ç¾åœ¨æ²’ç©ºç†ä½ ã€‚ã€';
                badgeClass = 'bg-red-100 text-red-600';
            } else if (prob < 50) {
                status = 'æœ‰é»æ©Ÿæœƒ';
                comment = 'ã€Œå¸‚é•·é‚„åœ¨ç³¾çµï¼Œå¯èƒ½è¦ç­‰æ™šä¸Š 10 é»ç”šè‡³æ˜å¤©æ—©ä¸Š 5 é»æ‰å®£å¸ƒã€‚ã€';
                badgeClass = 'bg-yellow-100 text-yellow-600';
            } else if (prob < 80) {
                status = 'å¾ˆæœ‰å¸Œæœ›';
                comment = 'ã€ŒKTV è¨‚ä½é›»è©±å¯ä»¥å…ˆæ‹¿èµ·ä¾†æº–å‚™äº†ï¼Œé›–ç„¶é‚„æ²’æ­£å¼å®£å¸ƒï¼Œä½†é¢¨è²å¾ˆå¤§ã€‚ã€';
                badgeClass = 'bg-blue-100 text-blue-600';
            } else {
                status = 'ä¸æ”¾æœƒè¢«ç½µæ­»';
                comment = 'ã€Œé€™æ©Ÿç‡å¸‚é•·ä¸æ”¾å‡å¯èƒ½è¦æº–å‚™è¢«ç½·å…äº†ï¼Œå®‰å¿ƒç¡è¦ºå§ï¼ã€';
                badgeClass = 'bg-green-100 text-green-600';
            }

            statusBadge.innerText = status;
            statusBadge.className = 'inline-block px-4 py-1 rounded-full text-sm font-bold mb-4 ' + badgeClass;
            commentDisplay.innerText = comment;
        }
    </script>
</body>
</html>
